(($,l,n,o,a)=>{'use strict';const r=new Map,e={init(t){this.v=t.v,this.url=t.url,this.jsUrl=t.jsUrl+'wc/',this.cssUrl=this.url+'styles/wc/modules/',this.bodyCl=t.bodyCl,this.sideMenu(),this.wcAjaxInit(),this.events(),this.initProductSlider(),l.on('infiniteloaded',()=>{this.initProductSlider()}),this.initWishlist(),setTimeout(()=>{this.clicks(),this.initThemibox()},1e3),this.bodyCl.contains('single-product')&&(this.singleProductSlider(),setTimeout(()=>{this.plusMinus()},800)),this.pluginCompatibility()},events(){l.body.on('keyup','input.qty',function(){const t=$(this),e=parseInt(t.attr('max'),10);t.val()>e&&t.val(e)}),l.on('themify_theme_spark',(t,e)=>{this.clickToSpark(t,e)}).on('themiboxloaded',t=>{$.fn.prettyPhoto?($(".thumbnails a[data-rel^='prettyPhoto']",t).prettyPhoto({hook:'data-rel',social_tools:!1,theme:'pp_woocommerce',horizontal_padding:20,opacity:.8,deeplinking:!1}),l.trigger('single_slider_loaded')):this.singleProductSlider(t).then(()=>{l.trigger('single_slider_loaded'),this.plusMinus(t)})})},clickToSpark(e,i){if(void 0!==a.sparkling_color){(i=i||{}).text||(i.text='ti-shopping-cart');let t=!1;const s=this.url+'images/'+i.text+'.svg';Promise.all([l.loadJs(this.jsUrl+'clickspark.min',!!n.clickSpark,'1.0'),r.has(s)?1:l.fetch(null,'text',{method:'GET',credentials:'omit'},s).then(t=>{const e=a.sparkling_color;'#dcaa2e'!==e&&(t=t.replace('#dcaa2e',e)),r.set(s,'data:image/svg+xml;base64,'+n.btoa(t))})]).then(()=>{t||(t=!0,i=Object.assign({duration:300,count:30,speed:8,type:'splash',rotation:0,size:10},i),clickSpark.setParticleImagePath(r.get(s)),clickSpark.setParticleDuration(i.duration),clickSpark.setParticleCount(i.count),clickSpark.setParticleSpeed(i.speed),clickSpark.setAnimationType(i.type),clickSpark.setParticleRotationSpeed(i.rotation),clickSpark.setParticleSize(i.size),clickSpark.fireParticles($(e)))})}},initWishlist(){if(void 0!==a.wishlist){const e=this;setTimeout(()=>{const e=o.tfClass('wishlist-button'),i=(()=>{const i=' '+o.cookie,s=' '+a.wishlist.cookie+'=',l=[];if(0<i.length){let e=i.indexOf(s);if(-1!==e){e+=s.length;let t=i.indexOf(';',e);-1===t&&(t=i.length);const n=JSON.parse(unescape(i.substring(e,t)));for(let t in n)l.push(n[t])}}return l})(),t=o.querySelector('.wishlist .icon-menu-count'),s=i.length;for(let t=e.length-1;-1<t;--t)e[t].classList.toggle('wishlisted',i.includes(parseInt(e[t].dataset.id)));t&&(t.classList.toggle('wishlist_empty',0===s),t.textContent=s)},1500),e.bodyCl.contains('wishlist-page')&&l.fetch({action:'themify_load_wishlist_page'},'html').then(t=>{o.tfClass('page-content')[0].appendChild(t)}),l.body.on('click.tf_wishlist','.wishlisted,.wishlist-button',function(t){t.preventDefault(),t.stopImmediatePropagation(),l.loadJs(e.jsUrl+'themify.wishlist',null,e.v).then(()=>{l.body.off('click.tf_wishlist'),$(this).click()})})}},singleProductSlider(s){return new Promise((t,e)=>{const i=(s=s||o).tfClass('woocommerce-product-gallery__wrapper')[0];i&&i.tfClass('tf_swiper-container')[0]?l.loadJs(this.jsUrl+'single-slider',null,this.v).then(()=>{l.trigger('themify_theme_product_single_slider',i).then(t)}).catch(e):t()})},plusMinus(t){const e=(t=t||o.body).querySelectorAll('#minus1,#add1');for(let t=e.length-1;-1<t;--t)e[t].tfOn('click',function(t){t.preventDefault(),t.stopPropagation();const e=this.closest('form').tfClass('qty')[0];if(e){let t=+e.value;const i=parseInt(e.min),s=0<e.step?parseInt(e.step):1,l=parseInt(e.max);(t-='minus1'===this.id?s:-1*s)<i?t=i:!isNaN(l)&&t>l&&(t=l),e.value=t}})},initProductSlider(){if(!this.bodyCl.contains('wishlist-page')){const e=o.tfClass('product-slider'),i=l.isTouch?'touchstart':'mouseover',s=this;for(let t=e.length-1;-1<t;--t)!e[t].hasAttribute('data-product-slider')||e[t].classList.contains('slider_attached')||e[t].classList.contains('hovered')||(e[t].tfOn(i,function(){this.classList.contains('hovered')||(this.classList.add('hovered'),l.loadJs(s.jsUrl+'slider',null,s.v).then(()=>{l.trigger('themify_theme_product_slider',[this])}))},{passive:!0,once:!0}).className+=' slider_attached')}},initThemibox(){const e=this;l.body.one('click','.themify-lightbox',function(t){t.preventDefault(),l.loadJs(e.jsUrl+'themibox',null,e.v).then(()=>{l.trigger('themify_theme_themibox_run',[this])})})},clicks(){let e=o.tfClass('reply-review');for(let t=e.length-1;-1<t;--t)e[t].tfOn('click',t=>{t.preventDefault(),$('#respond').slideToggle('slow')});for(let t=(e=o.tfClass('add-reply-js')).length-1;-1<t;--t)e[t].tfOn('click',function(t){t.preventDefault(),$(this).hide(),$('#respond').slideDown('slow'),$('#cancel-comment-reply-link').show()});null!==(e=o.tfId('cancel-comment-reply-link'))&&e.tfOn('click',function(t){t.preventDefault(),$(this).hide(),$('#respond').slideUp(),$('.add-reply-js').show()})},wcAjaxInit(){'undefined'!=typeof wc_add_to_cart_params&&l.loadJs(this.jsUrl+'ajax_to_cart',null,this.v)},sideMenu(){if(null!==o.tfId('slide-cart')){const e=this;let t=!1;l.sideMenu(o.querySelectorAll('#cart-link,#cart-link-mobile-link'),{panel:'#slide-cart',close:'#cart-icon-close',beforeShow(){!1===t&&o.tfId('cart-wrap')&&(this.panelVisible=!0,l.loadCss(e.cssUrl+'basket',null,e.v).then(()=>{t=!0,this.panelVisible=!1,this.showPanel()}))}})}},pluginCompatibility(){if(o.querySelector('.loops-wrapper.products')){const e={wpf_form:'wpf_ajax_success','yit-wcan-container':'yith-wcan-ajax-filtered'};for(let t in e)o.tfClass(t)[0]&&$(o).on(e[t],()=>{this.initProductSlider()})}}};for(let t=o.querySelectorAll('.widget_product_categories .count'),e=t.length-1;-1<e;--e)t[e].textContent=t[e].textContent.replace('(','').replace(')','');l.on('themify_theme_shop_init',t=>{e.init(t)},!0)})(jQuery,Themify,window,document,themifyScript);