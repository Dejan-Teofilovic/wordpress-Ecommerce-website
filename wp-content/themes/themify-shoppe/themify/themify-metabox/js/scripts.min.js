jQuery(function($){$.loadScript=function(e,t,i){2===arguments.length&&"function"==typeof arguments[1]&&(i=arguments[1],t={}),t=t||{};var a=$.Deferred(),n=("function"==typeof i&&a.done(function(){i()}),e),o=t,s=function(){a.resolve()},l=document.createElement("script"),d=(l.type="text/javascript",l.readyState?l.onreadystatechange=function(){"loaded"!=l.readyState&&"complete"!=l.readyState||(l.onreadystatechange=null,s())}:l.onload=function(){s()},["type","src","htmlFor","event","charset","async","defer","crossOrigin","text","onerror"]);if("object"==typeof o&&!$.isEmptyObject(o))for(var r in o)o.hasOwnProperty(r)&&$.inArray(r,d)&&(l[r]=o[r]);return l.src=n,document.getElementsByTagName(o.lazyLoad?"body":"head")[0].appendChild(l),a.promise()}}),window.Themify_Metabox=function($){'use strict';var a={};function l(e){let t='';$('input[type="checkbox"]',e).each(function(){t+=$(this).attr('id')+'='+$(this).val()+'&'}),$('input[type="text"]',e).val(t.slice(0,-1))}return a.loadScript=function(e,t,i){i?t():$.loadScript(e).done(function(){t()})},a.init=function(){window.addEventListener('load',a.document_ready,{passive:!0,once:!0})},a.document_ready=function(){a.init_metabox_tabs(),a.gallery_shortcode(),a.repeater(),a.enable_toggle(),a.query_category(),a.post_meta_checkbox(),a.init_fields($('body')),a.pagination($('body')),a.audioRemoveAction(),a.page_layout_field()},a.init_metabox_tabs=function(){$('.themify-meta-box-tabs').each(function(){var e=$(this),t=$('.ilc-htabs li',e);1<t.length?ThemifyTabs({ilctabs:'#'+e.attr('id')}):($('.ilc-tab',e).show(),t.addClass('select'))}),$('#themify-meta-boxes .ilc-htabs a').on('click',function(){a.set_cookie('themify-builder-tabs',$(this).attr('id'))});let e=document.querySelector('#themify-meta-boxes .default_active'),t=window.location,i=t.hash.trim();!e&&i&&'#'!==i&&(e=document.querySelector('#themify-meta-boxes a#'+CSS.escape(i.replace('#',''))))&&(t.hash='',window.history.replaceState(null,"",t.href.replace('#','')),e.scrollIntoView()),e?e.click():void 0!==a.get_cookie('themify-builder-tabs')&&null!==a.get_cookie('themify-builder-tabs')&&$('#'+a.get_cookie('themify-builder-tabs')).trigger('click')},a.init_fields=function(e){a.layout(e),a.color_picker(e),e.find('.themifyDatePicker').length&&a.loadScript(TF_Metabox.includes_url+'js/jquery/ui/datepicker.min.js',function(){a.loadScript(TF_Metabox.includes_url+'js/jquery/ui/slider.min.js',function(){a.loadScript(TF_Metabox.url+'js/jquery-ui-timepicker.min.js',function(){a.date_picker(e)},void 0!==$.ui.timepicker)},void 0!==$.fn.slider)},void 0!==$.fn.datepicker),a.assignments(e),a.dropdownbutton(e),a.togglegroup(e),$(document).triggerHandler('themify_metabox_init_fields',[a])},a.repeater=function(){$('body').on('click','.themify-repeater-add',function(e){e.preventDefault();var e=$(this).closest('.themify_field_row'),t=e.find('.themify-repeater-rows'),e=e.find('.themify-repeater-template').html(),i=1,e=(t.find('> div').length&&(t.find('> div').each(function(){i=Math.max(i,$(this).data('id'))}),++i),$(e.replace(/__i__/g,i)));e.find('.ajaxnonceplu').attr('id',''),t.append(e),e.has('.plupload-upload-uic').length&&e.find('.plupload-upload-uic').each(function(){themify_create_pluploader($(this))}),a.init_fields(t.find('.themify-repeater-row:last-child'))}).on('click','.themify-repeater-remove-row',function(e){e.preventDefault(),$(this).parent().remove()})},a.audioRemoveAction=function(){$('body').on('click','[data-audio-remove] a',function(e){e.preventDefault();var t=$(this).parent(),e=t.data('audio-remove'),i=function(){t.parent().find('.themify_upload_field').val(''),t.addClass('hide')};i(),e.action='themify_remove_audio',$.post(ajaxurl,e,i)})},a.color_picker=function(e){'function'==typeof $.fn.tfminicolors&&(e.find('.colorSelectInput').each(function(){var e={},t=$(this).data('format');'rgba'==t?(e.format='rgb',e.opacity=!0):'rgb'==t&&(e.format='rgb'),$(this).tfminicolors(e)}),e.find('.clearColor').on('click',function(){$(this).parent().find('.colorSelectInput').tfminicolors('value',''),$(this).parent().find('.colorSelectInput').val('')}))},a.date_picker=function(e){e.find('.themifyDatePicker').each(function(){var t=$(this),e=t.data('label'),i=t.data('close'),a=t.data('dateformat'),n=t.data('timeformat'),o=t.data('timeseparator');$.fn.datetimepicker.call(t,{showOn:'both',showButtonPanel:!0,closeButton:i,buttonText:e,dateFormat:a,timeFormat:n,stepMinute:5,firstDay:t.data('first-day'),separator:o,onClose:function(e){''!=e&&$('#'+t.data('clear')).addClass('themifyFadeIn')},beforeShow:function(){$('#ui-datepicker-div').addClass('themifyDateTimePickerPanel')}}),t.next().addClass('button')}),e.find('.themifyClearDate').on('click',function(e){e.preventDefault();e=$(this);$('#'+e.data('picker')).val('').trigger('change'),e.removeClass('themifyFadeIn')})},a.assignments=function(e){e.find('.themify-assignments, .themify-assignment-inner-tabs').tabs(),e.on('change','.themify-assignments input[type="checkbox"]',function(){var e=$(this);e.is(':checked')?e.closest('.themify-assignments').find('.values').append('<input type="hidden" name="'+e.attr('data-name')+'" value="on" />'):e.closest('.themify-assignments').find('.values input[type="hidden"][name="'+e.attr('data-name')+'"]').remove()})},a.layout=function(e){e.find('.preview-icon').each(function(){var t,e,i=$(this),a=i.parent(),n=a.find('.val'),o='',s='';0<i.closest('.group-hide').length?(s='theme-settings',t=i.closest('.group-hide'),o=t.data('hide')):0<i.closest('.themify_field_row').length&&(s='custom-panel',void 0!==(t=i.closest('.themify_field_row')).data('hide')&&(o=t.data('hide'))),i.on('click',function(e){e.preventDefault(),a.find('.selected').removeClass('selected'),i.addClass('selected'),n.val(i.find('img').attr('alt')).trigger('change'),''!==o&&('custom-panel'==s?(e=t.nextUntil('[data-hide]')).add(e.find('.themify_field .hide-if')).not('.toggled-off').filter('.'+o.replace(/\s/g,',.')).show().filter('.'+n.val()).hide():'theme-settings'==s&&t.find('.hide-if').filter('.'+o.replace(/\s/g,',.')).show().filter('.'+n.val()).hide())}),''!==o&&('custom-panel'==s?(e=t.nextUntil('[data-hide]')).add(e.find('.themify_field .hide-if')).not('.toggled-off').filter('.'+o.replace(/\s/g,',.')).filter('.'+n.val()).hide():'theme-settings'==s&&t.find('.hide-if').filter('.'+o.replace(/\s/g,',.')).show().filter('.'+n.val()).hide())}),e.find(".themify_field .preview-icon").on('click',function(e){e.preventDefault(),$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected"),$(this).parent().find(".val").val($(this).find("img").attr("alt")).trigger('change')}),e.find('.themify_field_row[data-hide]').each(function(){var t,i,e=$(this).data('hide');'string'==typeof e&&1<(e=e.split(' ')).length&&(t=(t=e.shift()).split('|'),i=$('.'+e.join(', .')),$('select, input',this).on('change',function(){var e=$(this).val();!t.includes(e)&&i.is(':visible')||i.toggle(!t.includes(e))}).trigger('change'))})},a.dropdownbutton=function(e){e.find('.dropdownbutton-group').each(function(){var o=$(this),e=(o.on('mouseenter mouseleave','.dropdownbutton-list',function(e){e.preventDefault();var t=$(this);if(t.hasClass('disabled'))return!1;'mouseenter'===e.type?t.children('.dropdownbutton').is(':visible')||t.children('.dropdownbutton').show():'mouseleave'===e.type&&t.children('.dropdownbutton').is(':visible')&&t.children('.dropdownbutton').hide()}).on('click','.first-ddbtn a',function(e){e.preventDefault()}).on('click','.ddbtn a',function(e){e.preventDefault();var t,e=$(this).find('img').attr('src'),i=$(this).data('val'),a=$(this).closest('.dropdownbutton-list'),n=a.attr('id');$(this).closest('.dropdownbutton-list').find('.first-ddbtn img').attr('src',e),$(this).closest('.dropdownbutton').hide(),$('input#'+n).val(i),a.next().hasClass('ddbtn-all')&&(n=o.hasClass('multi-ddbtn')?(t=$('.multi-ddbtn-sub',o.parent().parent()),$('.multi-ddbtn-sub + input',o.parent().parent())):(t=(e=a.next()).prev().siblings('.dropdownbutton-list'),e.siblings('input')),'yes'==a.next().val()?(t.addClass('disabled opacity-5'),t.each(function(){var e=$(this).data('def-icon');$(this).find('.first-ddbtn img').attr('src',e)}),n.val('')):t.removeClass('disabled opacity-5'))}),o.find('input.ddbtn-all'));'yes'===e.val()&&(o.hasClass('multi-ddbtn')?$('.multi-ddbtn-sub',o.parent().parent()):e.prev().siblings('.dropdownbutton-list')).addClass('disabled opacity-5')})},a.togglegroup=function(e){e.find('.themify_toggle_group_wrapper').each(function(){var e=$(this);e.find('.themify_toggle_group_inner').hide(),e.on('click','.themify_toggle_group_label',function(e){var t=$(this),i=t.find('i'),t=t.next();t.hasClass('is-activated')?(i.removeClass('ti-minus').addClass('tf_plus_icon'),t.hide().removeClass('is-activated')):(t.show().addClass('is-activated'),i.removeClass('tf_plus_icon').addClass('ti-minus')),e.preventDefault()})})},a.gallery_shortcode=function(){var t,n=wp.media.gallery.shortcode,i=wp.media.gallery;$('body').on('click','.themify-gallery-shortcode-btn',function(e){var a=$(this).closest('.themify_field').find('.themify-gallery-shortcode-input');a.html()&&(a.val(a.html()),a.html(''),a.text('')),t?t.open():t=0<$.trim(a.val()).length?i.edit($.trim(a.val())):wp.media.frames.file_frame=wp.media({frame:'post',state:'gallery-edit',title:wp.media.view.l10n.editGalleryTitle,editing:!0,multiple:!0,selection:!1}),wp.media.gallery.shortcode=function(e){var t=e.props.toJSON(),i=_.pick(t,'orderby','order'),e=(e.gallery&&_.extend(i,e.gallery.toJSON()),i.ids=e.pluck('id'),t.uploadedTo&&(i.id=t.uploadedTo),i._orderbyRandom&&(i.orderby='rand'),delete i._orderbyRandom,i.ids&&'post__in'===i.orderby&&delete i.orderby,_.each(wp.media.gallery.defaults,function(e,t){e===i[t]&&delete i[t]}),new wp.shortcode({tag:'gallery',attrs:i,type:'single'}));return a.val(e.string()),wp.media.gallery.shortcode=n,e},t.on('update',function(e){e=wp.media.gallery.shortcode(e).string().slice(1,-1);a.val('['+e+']')}),0==$.trim(a.val()).length&&$('.media-menu').find('.media-menu-item').last().trigger('click'),e.preventDefault()})},a.set_cookie=function(e,t){document.cookie=e+"="+t+";SameSite=strict;path=/"},a.get_cookie=function(t){t+="=";let i=document.cookie.split(';');for(var a=0,e=i.length;a<e;++a){let e=i[a];for(;' '==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(t))return e.substring(t.length,e.length)}return null},a.enable_toggle=function(){var e=$('.enable_toggle');0<e.length&&e.each(function(){var e=$(this).closest('.themify_write_panel');e.length||(e=$(this).closest('form')),$('.themify-toggle',e).hide().addClass('toggled-off')}),$('.enable_toggle .preview-icon').on('click',function(e){var t=$(this).find("img").attr("alt"),t=''!=$.trim(t)?'.'+t+'-toggle':'.default-toggle';$(this).closest('.inside').find('.themify-toggle').hide().addClass('toggled-off'),$(this).closest('.inside').find(t).show().removeClass('toggled-off'),e.preventDefault()}),$('.enable_toggle .preview-icon.selected').each(function(){var e=$(this).find("img").attr("alt");$(''!=e&&'default'!=e?'.'+e+'-toggle':'.default-toggle').show().removeClass('toggled-off')}),$('.enable_toggle input[type=radio]').on('click',function(){var e=$(this).val(),e=0!=e&&''!=e?'.'+e+'-toggle':'.default-toggle';$(this).siblings('input[type=radio]').each(function(){var e=$(this).val();0!=e&&''!==e&&$('.'+e+'-toggle').hide().addClass('toggled-off')}),$(e).each(function(){$(this).show().removeClass('toggled-off'),$(this).hasClass('enable_toggle_child')&&$(this).find('input[type=radio]:checked').siblings('input[type=radio]').each(function(){var e=$(this).val();setTimeout(function(){0!=e&&''!==e&&$('.'+e+'-toggle').hide().addClass('toggled-off')},500)})})}),e.each(function(){var e=$(this).find('input[type="radio"]:checked').val();$(0!=e&&''!==e?'.'+e+'-toggle':'.default-toggle').each(function(){$(this).show().removeClass('toggled-off'),$(this).hasClass('enable_toggle_child')&&$(this).find('input[type=radio]:checked').siblings('input[type=radio]').each(function(){var e=$(this).val();setTimeout(function(){0!=e&&''!==e&&$('.'+e+'-toggle').hide().addClass('toggled-off')},500)})})}),$('.enable_toggle input[type="checkbox"]').on('click',function(){var e=$(this).data('val'),e=0!=e&&''!=e?'.'+e+'-toggle':'.default-toggle';$(this).closest('.inside').find('.themify-toggle').hide().addClass('toggled-off'),$(this).prop('checked')&&$(this).closest('.inside').find(e).show().removeClass('toggled-off')}),$('.enable_toggle input[type="checkbox"]:checked').each(function(){var e=$(this).data('val');$(0!=e&&''!==e?'.'+e+'-toggle':'.default-toggle').show().removeClass('toggled-off')})},a.query_category=function(){var e=$('.themify_field'),t=$('.themify-info-link');function i(e,t){''!=t?e.closest('.inside').find('.themify_field_row').removeClass('query-field-hide'):e.closest('.inside').find('.themify_field_row').not(e.closest('.themify_field_row')).not('.query-field-visible').addClass('query-field-hide')}e.find('.query_category').on('blur',function(){var e=$(this),t=e.val();$(this).parent().find('.val').val(t),i(e,t)}).on('keyup',function(){var e=$(this),t=e.val();$(this).parent().find('.val').val(t),i(e,t)}),e.find('.query_category_single').on('change',function(){var e=$(this),t=e.val();e.parent().find('.query_category, .val').val(t),i(e,t)}).closest('.themify_field_row').addClass('query-field-visible'),t.closest('.themify_field_row').addClass('query-field-visible'),$('.query_category_single, .query_category').each(function(){var e=$(this),t=e.val();i(e,t)}),t.closest('.themify_field_row').removeClass('query-field-hide')},a.post_meta_checkbox=function(){$('.post-meta-group').each(function(){var e=$(this);$('.meta-all',e).prop('checked')&&$('.meta-sub',e).prop('disabled',!0).parent().addClass('opacity-7'),e.on('click','.meta-all',function(){$(this).prop('checked')?$('.meta-sub',e).prop('disabled',!0).prop('checked',!1).parent().addClass('opacity-7'):$('.meta-sub',e).prop('disabled',!1).parent().removeClass('opacity-7')})}),$('.custom-post-meta-group').each(function(){var e,t=$(this),i=$('input[type="text"]',t).val(),a={},n=[];if('yes'===i)$('.meta-all',t).val('yes').prop('checked',!0),$('.meta-sub',t).val('yes').prop('disabled',!0).parent().addClass('opacity-7');else{for(var o,n=i.split('&'),s=0;s<n.length;s++)a[(e=n[s].split('='))[0]]=e[1];for(o in a)'yes'===a[o]&&$('#'+o,t).val('yes').prop('checked',!0);$('.meta-all',t).prop('checked')&&$('.meta-sub',t).prop('disabled',!0).prop('checked',!1).parent().addClass('opacity-7')}t.on('click','.meta-all',function(){var e=$(this);e.prop('checked')?($('.meta-sub',t).val('yes').prop('disabled',!0).prop('checked',!1).parent().addClass('opacity-7'),e.val('yes')):($('.meta-sub',t).val('no').prop('disabled',!1).parent().removeClass('opacity-7'),e.val('no')),l(t)}).on('click','.meta-sub',function(){var e=$(this);e.prop('checked')?e.val('yes'):e.val('no'),l(t)})})},a.pagination=function(e){e.on('click','#themify_assignments_popup_show .themify-popup-visibility-tab',function(e){e.preventDefault();var t,i,a=$(this);a.data('active')||(e=a.data('type'),t=a.parents('#themify_assignments_popup_show').find('.themify-assignment-type-options[data-type='+e+']'),i=$('#popup_show-assignment-tab-pages').data('post-id'),$.ajax({url:ajaxurl,type:'post',data:{action:'themify_create_inner_popup_page',type:e,post_id:i},beforeSend:function(){},success:function(e){t.html(e),a.data('active','on')}}))}),e.on('click','.themify-assignment-pagination .page-numbers',function(e){e.preventDefault();var e=$(this),t=e.parents('.themify-assignment-options'),i=e.parents('.themify-assignment-items-inner'),a=$('.themify-assignment-pagination',i),n=parseFloat($('.themify-assignment-pagination .current',i).text()),o=$('.themify-assignment-items-inner',t),s=1;e.hasClass('next')?s=n+1:e.hasClass('prev')?s=n-1:e.hasClass('page-numbers')&&(s=parseFloat(e.text())),$.ajax({url:ajaxurl,type:'post',data:{action:'themify_create_popup_page_pagination',current_page:s,num_of_pages:i.data('pages')},beforeSend:function(){$('.tb_slider_loader',t).remove(),$('.themify-assignment-items-page',i).addClass('is-hidden'),a.hide(),o.append('<div class="tb_slider_loader"></div>')},success:function(e){$('.tb_slider_loader',t).remove(),$('.themify-assignment-items-page-'+s,i).removeClass('is-hidden'),a.html(e).show()}})})},a.page_layout_field=function(){const e=document.getElementsByClassName('themify_field-page_layout');if(e[0]){const i=e[0].querySelector('input[type="hidden"]'),a=document.getElementById('content_width'),n=document.getElementById('section_full_scrolling'),o=document.getElementById('hide_page_title'),s=document.getElementsByClassName('tf_section_scroll_setting'),l=function(e){const t='section_scroll'===e?'block':'none';for(let e=s.length-1;-1<e;--e)s[e].style.display=t;n&&(n.value='section_scroll'===e?'yes':'no'),a&&(a.value='section_scroll'===e||'full_width'===e?'full_width':''),'section_scroll'!==e&&'full_width'!==e||(i.value='sidebar-none',o&&(o.value='yes'))};var t=new MutationObserver(function(e,t){'value'==e[0].attributeName&&(t.disconnect(),l(i.value),t.observe(i,{attributes:!0}))});l(i.dataset.selected),t.observe(i,{attributes:!0})}},a.init(),a}(jQuery);