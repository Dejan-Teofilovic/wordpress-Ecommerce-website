function themify_create_pluploader(e){'use strict';var l=e,d=l.attr("id").replace("plupload-upload-ui",""),n=!1,m=!1,c=jQuery,e=JSON.parse(JSON.stringify(global_plupload_init));e.browse_button=d+e.browse_button,e.container=d+e.container,e.drop_element=d+e.drop_element,e.file_data_name=d+e.file_data_name,e.multipart_params.imgid=d,e.multipart_params._ajax_nonce=l.find(".ajaxnonceplu").attr("id").replace("ajaxnonceplu",""),l.hasClass('add-preset')&&(n=!0,e.multipart_params.haspreset='haspreset'),l.hasClass('add-preview')&&(m=!0,e.multipart_params.haspreview='haspreview'),l.hasClass('add-to-media')&&(e.multipart_params.tomedia='tomedia'),l.data('postid')&&(e.multipart_params.topost=l.data('postid')),l.data('fields')&&(e.multipart_params.fields=l.data('fields')),l.data('featured')&&(e.multipart_params.featured=l.data('featured')),l.data('formats')&&(e.filters[0].extensions=l.data('formats')),e.multipart_params.action=l.data('action');const a=new plupload.Uploader(e);a.bind('Init',function(e){}),a.init(),a.bind('FilesAdded',function(e,a){l.data('confirm')&&!confirm(l.data('confirm'))||(e.refresh(),e.start(),c(".tb_alert").addClass("busy").fadeIn(800))}),a.bind('Error',function(e,a){var t,r;c('.prompt-box .show-login').hide(),c('.prompt-box .show-error').show(),-600==a.code&&(t=themify_plupload_lang.filesize_error,r=themify_plupload_lang.filesize_error_fix),0<c('.prompt-box .show-error').length&&(c('.prompt-box .show-error').html('<p class="prompt-error">'+t+'</p>'),r&&c('.prompt-box .show-error').append('<p>'+r+'</p>')),c(".overlay, .prompt-box").fadeIn(500),document.getElementsByClassName('overlay')[0].addEventListener('click',function(){c(".overlay, .prompt-box").fadeOut(500)},{once:!0})}),a.bind('FileUploaded',function(e,a,t){var r=JSON.parse(t.response),o='200'!=t.status||r.error?'error':'done';if(c(".tb_alert").removeClass("busy").addClass(o).delay(800).fadeOut(800,function(){c(this).removeClass(o)}),r.error)c('.prompt-box .show-login').hide(),c('.prompt-box .show-error').show(),0<c('.prompt-box .show-error').length&&(c('.prompt-box .show-error').html('<p class="prompt-error">'+r.error+'</p>'),c('.prompt-box .show-error').append('<p>'+themify_plupload_lang.enable_zip_upload+'</p>')),c(".overlay, .prompt-box").fadeIn(500),document.getElementsByClassName('overlay')[0].addEventListener('click',function(){c(".overlay, .prompt-box").fadeOut(500)},{once:!0,passive:!0});else{c('#'+a.id).fadeOut();var t=r.file,a=r.url,s=r.type;if('zip'===s||'rar'===s||'plain'===s?window.location=location.href.replace(location.hash,''):c('#'+d).val(a),void 0!==r.thumb&&(themifyMediaLib.setPreviewIcon(l.closest('.themify_field, .themify_field_row'),r.thumb),c('body').trigger('themify_plupload_selected',[l,r])),n){c('#'+d).closest('fieldset').children('.preset').find('img').removeClass('selected');const i=a.replace(/^.*[\\\/]/,''),p=c('<a href="#" title="'+i+'"><span title="'+t+'"></span><img src="'+a+'" alt="'+a+'" class="backgroundThumb selected" /></a>').css('display','inline-block');c('#'+d).closest('fieldset').children('.preset').append(p)}m&&c('#'+d+'-preview').attr('src',a)}})}!function($){'use strict';const e=function(){const e=$('.plupload-upload-uic');0<e.length&&e.each(function(){themify_create_pluploader($(this))})};'complete'===document.readyState?e():window.addEventListener('load',e,{once:!0,passive:!0})}(jQuery);