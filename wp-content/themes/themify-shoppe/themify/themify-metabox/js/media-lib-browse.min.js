var themifyMediaLib={};!function($){'use strict';$((themifyMediaLib={init:function(){themifyMediaLib.mediaUploader()},mediaUploader:function(){var f='';$('body').on('click','.themify-media-lib-browse',function(e){var t=$(this),a=t.data('submit'),d=t.data('type');(f=wp.media.frames.file_frame=wp.media({title:$(this).data('uploader-title'),library:{type:d},button:{text:$(this).data('uploader-button-text')},multiple:!1})).on('select',function(){var e=f.state().get('selection').first().toJSON(),i=(a.attach_id=e.id,t.data('fields'));$('#'+i).val(e.url),$('body').trigger('themify_metabox_lib_selected',[t,e,f]),'image'===d?$.ajax({type:"POST",url:ajaxurl,data:a,dataType:'json',success:function(e){themifyMediaLib.setPreviewIcon(t.closest('.themify_field, .themify_field_row'),e.thumb)}}):'audio'!==d&&'video'!==d||t.closest('.themify_field_row').find('.themify_featimg_remove').removeClass('hide')}),f.open(),e.preventDefault()})},setPreviewIcon:function(e,i){i=$('<a href="'+i+'" target="_blank"><img src="'+i+'" width="40" /></a>').fadeIn(1e3).css('display','inline-block');0<e.find('.themify_upload_preview').find('a').length&&e.find('.themify_upload_preview').find('a').remove(),e.find('.themify_upload_preview').fadeIn().append(i),e.find('.themify_featimg_remove').removeClass('hide')}}).init)}(jQuery);