((a,o)=>{'use strict';const n=ThemifyBuilderModuleJs.cssUrl+'gallery_styles/',r=new Set;let c=o.tfId('tb_inline_styles');a.on('builder_load_module_partial',(e,l)=>{if(!0!==l||e.classList.contains('module-gallery')){const t=a.selectWithParent('module-gallery',e),i=[];for(let e=t.length-1;-1<e;--e)if(t[e].classList.contains('layout-showcase'))a.loadCss(n+'showcase','tb_gallery_showcase');else if(t[e].classList.contains('layout-lightboxed'))a.loadCss(n+'lightboxed','tb_gallery_lightboxed');else if(t[e].classList.contains('layout-grid')){a.loadCss(n+'grid','tb_gallery_grid');let s=t[e].tfClass('gallery-masonry')[0];if(s&&!s.classList.contains('gallery-columns-1')){let l='',e=window.getComputedStyle(s),t=e.getPropertyValue('--galN'),a=parseFloat(e.getPropertyValue('--galG'))||1.5;if(!t){let l=s.classList;for(let e=l.length-1;-1<e;--e)if(-1!==l[e].indexOf('gallery-columns-')){t=l[e].replace('gallery-columns-','');break}}if(t){if(t=parseInt(t),r.has('block')||(r.add('block'),l='.gallery-masonry.masonry-done{display:block}.gallery-masonry.masonry-done>.gutter-sizer{width:'+a+'%}'),!r.has(t)){r.add(t);let e=parseFloat((100-(t-1)*a)/t).toFixed(2).replace('.00','');l+='.gallery-columns-'+t+'.masonry-done .gallery-item{width:'+e+'%}'}''!==l&&(null===c?((c=o.createElement('style')).textContent=l,o.head.prepend(c)):c.innerText+=l),i.push(s)}}}0<i.length&&a.isotop(i,{itemSelector:'.gallery-item',columnWidth:!1})}}).body.on('click','.module-gallery .pagenav a',function(e){e.preventDefault();const t=this.closest('.module-gallery'),l=t.classList;l.add('builder_gallery_load'),a.fetch('','html',{method:'GET'},this.getAttribute('href')).then(l=>{if(l){let e=t.className.match(/tb_?.[^\s]+/);e=null!==e&&void 0!==e[0]?e[0]:'module-gallery',t.innerHTML=l.querySelector('.'+e).innerHTML,a.lazyLoading(t)}}).finally(()=>{l.remove('builder_gallery_load')})}).on('click','.layout-showcase.module-gallery a',function(e){e.preventDefault(),e.stopPropagation();const l=this.closest('.gallery').tfClass('gallery-showcase-image')[0],t=l.tfClass('gallery-showcase-title')[0],a=l.tfClass('gallery-showcase-title-text')[0],s=l.tfClass('gallery-showcase-caption')[0],i=l.tfTag('img')[0],o=this.dataset.image,n=new Image;if(t){const r=t.style;t.innerText.trim()?r.opacity=r.visibility='':(r.opacity=0,r.visibility='hidden')}l.classList.add('tf_lazy'),n.decoding='async',n.alt=this.tfTag('img')[0].alt,a&&(a.innerHTML=this.title),s&&(s.innerHTML=this.dataset.caption),n.src=o,n.decode().catch(()=>{}).finally(()=>{i.replaceWith(n),l.classList.remove('tf_lazy')})})})(Themify,document);