(a=>{'use strict';let n,i=null,s=null,o=null;const r=new Set,l=new Set,c=e=>{const t=tbLocalScript.breakpoints;let n='desktop';return e<=t.mobile?n='mobile':e<=t.tablet[1]?n='tablet':e<=t.tablet_landscape[1]&&(n='tablet_landscape'),n},d=e=>'zooming'===getComputedStyle(e).getPropertyValue('--tbBg'),u=(n,i)=>{const s=e=>{const t=e.currentTarget;t.style.transition='',t.tfOff('transitionend transitioncancel',s,{passive:!0,once:!0})};for(let t=n.length-1;-1<t;--t){let e=n[t].target.style;n[t].target.isConnected?n[t].isIntersecting&&(n[t].target.tfOn('transitionend transitioncancel',s,{passive:!0,once:!0}),e.transition='background-size 1.5s ease-in',e.backgroundSize='100%',i.unobserve(n[t].target)):(e.transition=e.backgroundSize='',r.delete(n[t].target),l.delete(n[t].target),i.unobserve(n[t].target))}!1===a.is_builder_active&&0===l.size&&0===r.size&&(a.off('tfsmartresize',b),o.disconnect(),o=null)},b=t=>{t&&(s&&clearTimeout(s),s=setTimeout(()=>{i&&cancelAnimationFrame(i),i=requestAnimationFrame(()=>{const e=c(t.w);if(e!==n){n=e;for(let e of r)e.isConnected?d(e)?(e.style.backgroundSize='',o.observe(e)):(e.classList.contains('builder-parallax-scrolling')||e.classList.contains('builder-zoom-scrolling')||(e.style.backgroundSize=''),o.unobserve(e),l.add(e),r.delete(e)):r.delete(e);for(let e of l)e.isConnected?d(e)&&(e.style.backgroundSize='',r.add(e),l.delete(e),o.observe(e)):l.delete(e);!1===a.is_builder_active&&0===l.size&&0===r.size&&(a.off('tfsmartresize',b),o.disconnect(),o=null),i=s=null}})},80))};a.on('builder_load_module_partial',(e,t)=>{let n;if(!0===t){if(!e.hasAttribute('data-zooming-bg'))return;n=[e]}else n=a.selectWithParent('[data-zooming-bg]',e);null===o&&(o=new IntersectionObserver(u,{threshold:.3}),a.on('tfsmartresize',b));for(let e=n.length-1;-1<e;--e)!1===a.is_builder_active&&n[e].removeAttribute('data-zooming-bg'),d(n[e])?(r.add(n[e]),o.observe(n[e])):l.add(n[e])})})(Themify);