((o,i)=>{'use strict';let l=o.h,a,s=null,n=null,r=null;const d='builder-zoom-scrolling',c=new Set,u=new Set,m=()=>{requestAnimationFrame(()=>{for(let e of c)e.isConnected?e.classList.contains(d)&&g(e):c.delete(e)})},b=e=>'zoom'===getComputedStyle(e).getPropertyValue('--tbBg'),f=t=>{t&&(l=t.h,n&&clearTimeout(n),n=setTimeout(()=>{s&&cancelAnimationFrame(s),s=requestAnimationFrame(()=>{const e=(e=>{const t=tbLocalScript.breakpoints;let l='desktop';return e<=t.mobile?l='mobile':e<=t.tablet[1]?l='tablet':e<=t.tablet_landscape[1]&&(l='tablet_landscape'),l})(t.w);if(e!==a){a=e;for(let e of c)e.isConnected?b(e)?g(e):(e.classList.remove(d),e.classList.contains('builder-parallax-scrolling')||(e.style.backgroundSize=''),u.add(e),c.delete(e)):c.delete(e);for(let e of u)e.isConnected?b(e)&&(e.classList.add(d),c.add(e),u.delete(e),g(e)):u.delete(e);!1===o.is_builder_active&&0===u.size&&0===c.size&&(o.off('tfsmartresize',f),i.tfOff('scroll',m,{passive:!0,capture:!0}),r=null),s=n=null}})},40))},g=e=>{const t=e.getBoundingClientRect();0<=t.bottom&&t.top<=l&&(e.style.backgroundSize=140-(t.top+t.height)/(l+t.height)*40+'%')};o.on('builder_load_module_partial',(e,t)=>{let l;if(!0===t){if(!e.hasAttribute('data-zoom-bg'))return;l=[e]}else l=o.selectWithParent('[data-zoom-bg]',e);if(void 0!==l[0]){for(let e=l.length-1;-1<e;--e)!1===o.is_builder_active&&l[e].removeAttribute('data-zoom-bg'),b(l[e])?(l[e].classList.add(d),c.add(l[e]),g(l[e])):u.add(l[e]);null===r&&(r=!0,i.tfOn('scroll',m,{passive:!0,capture:!0}),o.on('tfsmartresize',f))}})})(Themify,window);