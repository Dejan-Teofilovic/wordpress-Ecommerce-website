(($,r)=>{'use strict';r.on('builder_load_module_partial',(e,t)=>{if(!0!==t||e.classList.contains('module-optin')){const o=r.selectWithParent('tb_optin_form',e);o[0]&&r.requestIdleCallback(()=>{{var t=o[0];const s=async e=>{const t=new FormData(e),a=e.querySelector('[name="g-recaptcha-response"]');null!==a&&t.set('contact-recaptcha',a.value);try{const c=await r.fetch(t);c.success?'s1'===e.dataset.success?window.location.href=c.data.redirect:$(e).fadeOut().closest('.module').find('.tb_optin_success_message').fadeIn():console.log(c.data.error)}catch(e){}e.classList.remove('processing'),'object'==typeof grecaptcha&&'v2'===e.find('.themify_captcha_field').data('ver')&&grecaptcha.reset()},a=c=>{r.is_builder_active||c.tfOn('submit',function(e){e.preventDefault();const a=this;if(a.classList.contains('processing'))return!1;a.className+=' processing';const t=c.tfClass('themify_captcha_field')[0];t&&'v3'===t.dataset.ver&&'undefined'!=typeof grecaptcha?grecaptcha.ready(()=>{grecaptcha.execute(t.dataset.sitekey,{action:'captcha'}).then(e=>{const t=document.createElement('input');t.type='hidden',t.name='g-recaptcha-response',t.value=e,a.prepend(t),s(a)})}):s(a)})},c=t.tfClass('themify_captcha_field')[0];if(c&&'undefined'==typeof grecaptcha){const n=c.dataset.sitekey;if(n){let e='https://www.google.com/recaptcha/api';'v3'===c.dataset.ver&&(e+='?render='+n),r.loadJs(e,'undefined'!=typeof grecaptcha,!1).then(()=>{a(t)})}}else a(t)}},300)}})})(jQuery,Themify);