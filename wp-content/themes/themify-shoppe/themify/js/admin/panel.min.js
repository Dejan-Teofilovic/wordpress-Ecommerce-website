let ThemifyPanel;((c,o,p)=>{'use strict';ThemifyPanel=class{constructor(e,t,a,n,i){this.el=e,this.vals=a,this.options=n,this.labels=i,this.nonce=t,this.bindings=new Map,this.topTabs();const s=new IntersectionObserver(async(t,a)=>{for(let e=t.length-1;-1<e;--e)if(!0===t[e].isIntersecting){a.unobserve(t[e].target);const n=t[e].target,i=p.createElement('div');i.className='tf_loader';try{if(n.classList.contains('ajax_select')){n.parentNode.after(i);const s=await c.fetch({action:n.dataset.ajaxAction,nonce:this.nonce},'html');n.firstChild&&n.firstChild.remove(),n.appendChild(s)}else if(n.hasAttribute('data-codeditor')){await c.loadJs(c.url+'js/admin/modules/codemirror/codemirror',!!window.ThemifyCodeMiror);let e=new ThemifyCodeMiror(n,n.dataset.codeditor);await e.run()}}catch(e){}i.remove()}0===t.length&&a.disconnect()}),l=e.querySelectorAll('.ajax_select,[data-codeditor]');for(let e=l.length-1;-1<e;--e)s.observe(l[e])}getIcon(e,t){e='tf-'+e.trim().replace(' ','-');const a='http://www.w3.org/2000/svg',n=p.createElementNS(a,'use'),i=p.createElementNS(a,'svg');let s='tf_fa '+e;return t&&(s+=' '+t),i.setAttribute('class',s),n.setAttributeNS(null,'href','#'+e),i.appendChild(n),i}after(e){const t=p.createElement('div');return t.innerHTML=e,t.className='after',t}getHelp(e){const t=p.createElement('div'),a=p.createElement('i'),n=p.createElement('div');return a.appendChild(this.getIcon('ti-help')),a.tabIndex='-1',n.className='help_content tf_hide tf_box',n.innerHTML=e,t.className='help tf_rel',t.append(a,n),t}getDisabledMsg(e){const t=p.createElement('div');return'disabled'!==e&&(t.className='warning',t.innerHTML=e),t}binding(){if(0<this.bindings.size)for(let[e,s]of this.bindings){let t=this.el.querySelector('#'+e);if(t){let e=function(){let e={},a=this.closest('#main'),n,i;if('SELECT'===this.tagName?e=s[this.value]||s.any:'checkbox'===this.type&&(e=this.checked?s.checked:s.not_checked),n=e.show,i=e.hide,n)for(let t=(n=Array.isArray(n)?n:[n]).length-1;-1<t;--t){let e=a.querySelector('.'+n[t]);e&&(e.style.display='')}if(i)for(let t=(i=Array.isArray(i)?i:[i]).length-1;-1<t;--t){let e=a.querySelector('.'+i[t]);e&&(e.style.display='none')}};e.call(t),t.tfOn('change',e,{passive:!0})}}this.bindings.clear()}topTabs(){const s=p.createDocumentFragment(),l=p.createDocumentFragment(),r=p.createDocumentFragment(),e=this.el.querySelector('#main'),t=p.createElement('ul');let c=new URL(window.location.href).searchParams.get('tab')||'';this.options[c]===o&&(c=Object.keys(this.options)[0]),t.className='top_tabs tf_overflow';for(let i in this.options){let e=p.createElement('li'),t=p.createElement('section'),a=p.createElement('input'),n=p.createElement('label');a.type='radio',a.name='tab',a.className='tab tf_hide',a.id=n.htmlFor='tab-'+i,n.append(this.getIcon(this.options[i].icon),p.createTextNode(this.options[i].label)),t.id='tab-'+i+'-content',t.className='content tf_hide',i===c&&(a.checked=!0),t.appendChild(this.render(this.options[i].options)),e.appendChild(n),l.appendChild(t),r.appendChild(a),s.appendChild(e)}this.el.tfOn('change',e=>{const t=e.target&&'radio'===e.target.type&&e.target.classList.contains('tab')?e.target:null;if(t){const a=new URL(window.location.href);a.searchParams.set('tab',t.id.replace('tab-','')),history.replaceState(null,null,a)}},{passive:!0}),t.appendChild(s),this.el.prepend(r),this.el.tfClass('header')[0].prepend(t),e.classList.add('tf_opacity'),e.appendChild(l),this.binding(),e.classList.remove('tf_opacity')}render(d){const t=p.createDocumentFragment();for(let c=0,e=d.length;c<e;++c){let i=p.createElement('div'),a=p.createElement('div'),s=d[c].id,l=d[c].type,n=d[c].label!==o,r=s!==o&&this.vals[s]!==o?this.vals[s]:d[c].def;if(i.className='field',a.className='field_input field_'+l,n){let e='checkbox'===l?Object.keys(d[c].options).length:0,t=(s&&'radio'===l&&(s+='_'+Object.keys(d[c].options)[0]),s?'label':'span'),a=p.createElement(t),n='label'==t?p.createElement('div'):null;a.textContent=d[c].label,s&&(a.htmlFor=s),('group'===l||'radio'===l||1<e)&&(i.className+=' alig_top'),n&&(n.className='label',n.appendChild(a),a=n),d[c].help&&(a.appendChild(this.getHelp(d[c].help)),n||(a.className='label')),i.appendChild(a)}try{let e='text'===l||'number'===l||'email'===l||'url'===l||'hidden'===l?'input':l,t=this[e](d[c],r,l);n||'group'!==l?a.appendChild(t):(i.className+=' field_group',i.appendChild(t))}catch(e){console.log(l,e)}if(n||'group'!==l){if(!d[c].disabled&&d[c].desc){i.classList.add('alig_top');let e=p.createElement('div');e.className='description',e.innerHTML=d[c].desc,a.appendChild(e)}i.appendChild(a)}d[c].disabled&&(i.classList.add('alig_top','has_error'),a.appendChild(this.getDisabledMsg(d[c].disabled))),a.className+=' count_'+a.childElementCount,d[c].wrap_class&&(i.className+=' '+d[c].wrap_class),i.className+=' count_'+i.childElementCount,t.appendChild(i),d[c].bind&&s&&this.bindings.set(s,d[c].bind)}return t}select(a,n){const e=p.createElement('div'),t=p.createElement('select'),i=p.createDocumentFragment(),s=p.createDocumentFragment();if(e.className='selectwrapper tf_inline_b tf_vmiddle tf_rel',t.className='tf_scrollbar',a.class!==o&&(t.className+=' '+a.class),a.id&&(t.name=t.id=a.id),a.disabled?t.disabled=!0:n&&a.ajax&&(a.options={[n]:''}),a.options){for(let t in a.options){let e=p.createElement('option');e.value=t,e.text=a.options[t],t===n&&(e.selected=!0),s.appendChild(e)}t.appendChild(s)}return e.appendChild(t),i.appendChild(e),a.after&&i.appendChild(this.after(a.after)),a.ajax&&(t.className+=' ajax_select',t.dataset.ajaxAction=a.ajax),i}expand(e){const t=p.createElement('div');return t.className='expand',t.appendChild(this.render(e.options)),t}group(e){return this.render(e.options)}radio(n,i){const s=p.createDocumentFragment(),l=n.options;for(let a in l){let e=p.createElement('input'),t=p.createElement('label');e.type='radio',e.value=a,e.name=n.id,t.textContent=l[a],t.htmlFor=e.id=n.id+'_'+a,n.disabled?e.disabled=!0:a===i&&(e.checked=!0),s.append(e,t)}return n.after&&f.appendChild(this.after(n.after)),s}checkbox(n,i){const s=p.createDocumentFragment(),l=n.options;for(let a in l){let e=p.createElement('input'),t=p.createElement('label');e.type='checkbox',e.value=1,e.name=a,t.textContent=l[a],t.htmlFor=e.id=a+'_checkbox',n.disabled?e.disabled=!0:a===i&&(e.checked=!0),s.appendChild(e),l[a]&&s.appendChild(t)}return n.after&&s.appendChild(this.after(n.after)),s}input(e,t,a){const n=p.createDocumentFragment(),i=p.createElement('input');return e.disabled?i.disabled=!0:i.value=null!=t?t:'',i.type=a||'text',e.id&&(i.name=e.id),'hidden'!==a&&(e.id&&(i.id=e.id),e.min||'number'===a||'range'===a?i.min=parseInt(e.min)||0:i.className='tf_w',e.max&&(i.max=parseInt(e.max),i.defaultValue=i.value=t),e.step&&(i.step=e.step),e.placeholder&&(i.placeholder=e.placeholder)),e.class&&(i.className+=' '+e.class),n.appendChild(i),e.after&&n.appendChild(this.after(e.after)),n}textarea(e,t){const a=p.createDocumentFragment(),n=p.createElement('textarea');return n.id=n.name=e.id,n.className='tf_w',e.class&&(n.className+=' '+e.class),e.disabled?n.disabled=!0:n.value=t||'',a.appendChild(n),e.after&&a.appendChild(this.after(e.after)),e.codeditor&&(n.dataset.codeditor=e.codeditor),a}slider(e,t){const a=p.createDocumentFragment(),n=Object.assign(e),i=(t||e.def||(t=e.max),delete n.after,this.input(n,t,'number')),s=(delete n.id,this.input(n,t,'range'));a.append(s,i),e.after&&a.appendChild(this.after(e.after));for(let e=a.querySelectorAll('input'),t=e.length-1;-1<t;--t)e[t].tfOn('input change',e=>{let t=e.currentTarget,a=parseInt(t.value),n=parseInt(t.min),i=parseInt(t.max),s=t.nextElementSibling||t.previousElementSibling;'change'===e.type&&(a>i||a<n)&&(a=a>i?i:n,t.value=a),s.value=a},{passive:!0});return a}toggle(e,t){const a=p.createElement('label'),n=p.createElement('input'),i=p.createElement('div'),s=e.value||1;return n.className='toggle_switch',n.type='checkbox',n.id=n.name=e.id,n.value=s,e.disabled?n.disabled=!0:(e.opp&&(n.className+=' opposite'),t==s&&(n.checked=!0)),i.className='switch_label tf_rel tf_box',i.dataset.on=e.show||this.labels.en,i.dataset.off=e.hide||this.labels.dis,e.class&&(i.className+=' '+e.class),a.append(n,i),a}replace_url(e,t){const a=p.createDocumentFragment(),n=this.render([e.find]),i=this.render([e.replace]),s=p.createElement('button'),l=p.createElement('span'),r=e.confirm;return l.textContent=e.text,s.type='button',s.className='clear_cache find_replace',e.class&&(s.className+=' '+e.class),s.dataset.done=e.done,s.dataset.clearing=e.clearing,s.append(this.getIcon('ti-eraser'),l),s.tfOn('click',async e=>{if(confirm(r)){const t=e.currentTarget;if(!t.disabled){t.disabled=!0,c.loadJs(c.url+'js/admin/notification',!!win.TF_Notification);const a=t.tfTag('span')[0],n=a.textContent;a.textContent=t.dataset.clearing,await c.loadJs(c.url+'js/admin/modules/find-replace',!!win.TF_Replace),input=t.closest('.field_replace_url').tfTag('input'),find=input[0].value.trim(),replace=input[1].value.trim();try{await TF_Replace(find,replace,this.nonce)}catch(e){}a.textContent=n,t.disabled=!1}}},{passive:!0}),a.append(n,i,s),a}clear_cache(e,t){const a=p.createDocumentFragment(),l=p.createElement('button'),n=p.createElement('span');if(n.textContent=e.text,l.className='clear_cache',l.type='button',e.class&&(l.className+=' '+e.class),l.dataset.action=e.action,l.dataset.done=e.done,l.dataset.clearing=e.clearing,l.append(this.getIcon('ti-eraser'),n),a.appendChild(l),e.network){const i=p.createElement('div');i.className='clear_cache_network',i.appendChild(this.checkbox({options:e.network})),a.appendChild(i)}return e.after&&a.appendChild(this.after(e.after)),l.tfOn('click',async e=>{const t=e.currentTarget,a=t.tfTag('span')[0],n=a.textContent;if(!t.disabled){a.textContent=t.dataset.clearing,t.disabled=!0,await c.loadJs(c.url+'js/admin/notification',!!win.TF_Notification),TF_Notification.show('info',t.dataset.clearing);try{const i=await c.fetch({nonce:this.nonce,action:t.dataset.action,all:l.parentNode.querySelector('input:checked')?1:0});if(!i.success)throw i;await TF_Notification.showHide('done',t.dataset.done,1500)}catch(e){const s=e.data||e;await TF_Notification.showHide('error',s)}a.textContent=n,t.disabled=!1}},{passive:!0}),a}}})(Themify,void 0,document);