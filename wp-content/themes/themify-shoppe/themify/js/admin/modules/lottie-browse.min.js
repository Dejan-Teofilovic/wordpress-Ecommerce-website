let LottieBrowse;((y,_,e)=>{'use strict';let v,w,b=new WeakMap,a;LottieBrowse={el:null,run(){return new Promise(async(e,t)=>{await this.show(),e()})},async render(){if(null===this.el){const e=_.click,t=y.createElement('button'),s=y.createElement('input'),a=y.createElement('button'),i=y.createElement('div'),l=y.createElement('button'),o=y.createElement('ul'),n=y.createElement('div'),r=y.createElement('div'),c=y.createElement('div'),p=(y.createElement('div'),y.createDocumentFragment()),d=y.createDocumentFragment(),h=[w?null:_.fetch('','blob',{credentials:'omit',method:'GET',mode:'cors',headers:{'Content-Type':'application/zip'}},'https://themify.me//public-api/lottie/lottie.zip'),_.importJs(_.url+'js/admin/jszip.min','3.10.1'),_.loadJs('https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.10.0/lottie_light.min.js',!!window.lottie,!1),_.importJs('lottie')],m=(this.el=y.createElement('div'),this.el.className='lightbox tf_hide',l.type='button',l.className='menu_icon tf_rel',o.className='menu tf_box tf_hidden tf_opacity tf_scrollbar',s.type='text',s.className='search tf_box',s.required=!0,s.setAttribute('inputmode','search'),s.setAttribute('pattern','.*\\S.*'),t.className='tf_close',a.type=t.type='button',a.className='clear tf_close',i.className='menu_wrap flex tf_rel',n.className='container tf_scrollbar',r.className='overlay tf_abs_t tf_opacity tf_w tf_h tf_opacity tf_hide',c.id='tf_lottie_root',c.style.display='none',c.attachShadow({mode:'open'}).append(this.el,r),y.body.appendChild(c),h.push(_.loadCss(_.url+'css/base.min','tf_base-css',!1,this.el)),h.push(_.loadCss(_.url+'css/admin/lottie-browse',null,!1,this.el)),(async e=>{if(!v){const i=(await _.importJs('lottie')).TF_Lottie;v=new IntersectionObserver((s,e)=>{for(let t=0,e=s.length;t<e;++t){let a=s[t].target,e=b.get(a);1!==e&&(.49<=s[t].intersectionRatio?e?e.player.isPaused&&e.player.play():(b.set(a,1),w.file(a.dataset.id+'.json').async('string').then(async e=>{const t=a.tfClass('lottie')[0],s=new i(t,{actions:[{count:-1,state:'autoplay',tr:'autoplay',data:JSON.parse(e)}]});await s.run(),b.set(a,s),t.classList.remove('tf_loader')})):e&&!e.player.isPaused&&e.player.pause())}},{threshold:.5,root:e})}})(n),await Promise.all(h)),u=new JSZip,f=(w=w||await u.loadAsync(m[0])).files;for(let i in f)if(!0===f[i].dir){let e=y.createElement('li');e.textContent=i.replace('/',''),p.appendChild(e)}else{let e=y.createElement('div'),t=y.createElement('div'),s=y.createElement('div'),a=i.replace('.json','');t.className='tf_loader lottie',s.textContent=a.split('/')[1],s.className='title',e.dataset.id=a,e.className='item',e.append(t,s),d.appendChild(e),v.observe(e)}return n.appendChild(d),o.appendChild(p),i.append(l,o,s),this.el.append(i,n,t),c.style.display='',r.tfOn(e,e=>{e.stopPropagation(),this.close()},{passive:!0}),t.tfOn(e,e=>{e.stopPropagation(),this.close()},{passive:!0}),void a.tfOn(e,e=>{e.stopPropagation(),this.clearSearch()},{passive:!0});group.appendChild(navFr),n.appendChild(tabFr),n.tfOn(e,e=>{const t=e.target.closest('button');t&&(e.stopPropagation(),t.closest('.cat_menu')?(this.clearSearch(),this.filter(t)):t.hasAttribute('data-icon')&&(this.setIcon(t.dataset.icon,t.closest('section').dataset.id,t.closest('.group').id),this.close()))},{passive:!0}),s.tfOn('input',e=>{e.stopPropagation(),this.filter(this.el.querySelector('#'+this.el.querySelector('input:checked').value+' .cat_menu .selected')),this.search(e.currentTarget.value)},{passive:!0}),titleWrap.append(title,t),i.append(group,s,a),this.el.append(titleWrap,i,n)}},destroy(){const s=this.el.tfClass('item');for(let t=s.length-1;-1<t;--t){let e=b.get(s[t]);e&&(e.destroy(),b.delete(e))}v.disconnect(),this.el.remove(),b=new WeakMap,_.isTouch?w=null:a=setTimeout(()=>{w=a=null},6e4),v=this.el=null},show(s){return new Promise(async e=>{this.el||await this.render(s),a&&(clearTimeout(a),a=null);const t=this.el.getRootNode().querySelector('.overlay');t.classList.remove('tf_hide'),this.el.classList.remove('tf_hide'),requestAnimationFrame(()=>{this.el.tfOn('transitionend',()=>{console.log('aaa'),e()},{passive:!0,once:!0}).style.top=0,t.classList.remove('tf_opacity')})})},close(){return new Promise(t=>{const e=this.el.getRootNode().querySelector('.overlay');this.el.tfOn('transitionend',e=>{e.currentTarget.classList.add('tf_hide'),this.destroy(),t()},{passive:!0,once:!0}),e.tfOn('transitionend',function(){this.classList.add('tf_hide'),this.classList.remove('tf_opacity')},{passive:!0,once:!0}).classList.add('tf_opacity'),this.el.style.top=''})}}})(window.top.document,Themify);export{LottieBrowse};