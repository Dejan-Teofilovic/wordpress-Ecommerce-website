((D,$,L,F)=>{'use strict';$(function(){var e,o,l,t=$('body'),i=$('#themify'),a=$('#setting>.subtabnav'),n=$('#themify_404_page_autocomplete'),s=(i.find('.maintab').not('[aria-expanded="false"]').each(function(){$(this).find('.subtab').css('minHeight',$(this).find('.subtabnav').outerHeight())}),0<n.length&&(o={},l=n.closest('.themify_404_autocomplete_wrap'),n.autocomplete({minLength:2,autoFocus:!0,classes:{"ui-autocomplete":"highlight"},source(e,n){var s=e.term;l.addClass('themify_autocomplete_run'),s in o?(n(o[s]),l.removeClass('themify_autocomplete_run')):$.ajax({url:ajaxurl,dataType:"json",type:'POST',data:{term:s,action:'themify_get_404_pages'},success(e){for(const a in e)e[a].label=(t=e[a].label,i=void 0,(i=F.createElement('textarea')).innerHTML=t,i.innerText);var t,i;o[s]=e,n(e.length?e:[themify_js_vars.page_not_found]),l.removeClass('themify_autocomplete_run')}})},select(e,t){e.preventDefault(),t.item.value!==themify_js_vars.page_not_found&&n.val(t.item.label).next('input[type="hidden"]').val(t.item.value)},change(e,t){t.item||e.target.value||n.next('input[type="hidden"]').val('')}}).focus(function(){$(this).autocomplete('search')})),0<a.length&&(e=a.offset().top-32),!1),r=function(e,t){$('.search-setting-holder .clear-search').trigger('click');var t='tabscreate'===e.type?L.location:t.newTab.find('a')[0];history.replaceState(null,null,t.hash||null),'tabscreate'!==e.type||s||(s=!0,(t=$('#themify div#setting div.subtab')).each(function(){var e=$(this).find('fieldset');2<e.length?e.children('.themify_panel_fieldset_wrap').hide():e.find('legend').addClass('themify_panel_fieldset_nocollapse')}),t.find('legend:not(.themify_panel_fieldset_nocollapse)').on('click',function(){var e=$(this),i=e.children('i');i.hasClass('tf_plus_icon')?e.siblings().slideDown("fast",function(){if(this.tfClass('CodeMirror').length<1){const t=this.tfClass('tf_code_editor');for(let e=t.length-1;-1<e;--e)!async function(e){try{await D.loadJs(D.url+'js/admin/modules/codemirror/codemirror',!!L.ThemifyCodeMiror);const t=new ThemifyCodeMiror(e,'htmlmixed');await t.run()}catch(e){}}(t[e])}i.removeClass('tf_plus_icon').addClass('ti-minus')}):e.siblings().slideUp("fast",function(){i.removeClass('ti-minus').addClass('tf_plus_icon')})}))};$('.maintab, #content').tabs({fx:{opacity:'toggle',duration:200},cache:!0,select(){$(this).css({height:$(this).height(),overflow:'hidden'})},show(){$(this).css({height:'auto',overflow:'visible'}),0<a.length&&(e=a.offset().top-32)},beforeActivate:r,create:r});let c=L.location.hash&&F.querySelector('a[href="'+L.location.hash+'"]');if(c&&c.closest('.subtabnav')){const T=c.closest('.maintab').getAttribute('id'),O=F.tfId('maintabnav').querySelector('a[href="#'+T+'"]');O&&O.click()}0<a.length&&L.tfOn('scroll',function(){$(this).scrollTop()>e?a.hasClass('themify_settings_fixed')||a.addClass('themify_settings_fixed'):a.removeClass('themify_settings_fixed')},{passive:!0});var d=function(){var e=$("#search-setting").val();e.length<=0?(f(),$(".subtab",'#setting').unmark({done(){$('.searching').removeClass('searching'),$('.contain-result').removeClass('contain-result'),$('#setting').removeClass('not-found')}})):(e.length&&!$('.search-setting-holder .clear-search').hasClass('show')&&f(),$(".subtab",'#setting').unmark({done(){$('.searching').removeClass('searching'),$('.contain-result').removeClass('contain-result'),$('#setting').removeClass('not-found'),$("*:not(:input):contains('"+e+"')","#setting .subtab").mark(e,{diacritics:!0,separateWordSearch:!0,exclude:["option",".tm-option-title-fw"],filter(e,t,i,a){if("#text"===e.nodeName){if('none'===$(e).parent().parent().css('display'))return!1}else if('none'===$(e).parent().css('display'))return!1;return!0},each(e){$(e).closest('fieldset').addClass('contain-result'),$(e).closest('.subtab').addClass('contain-result')},done(){$('#setting').addClass('searching')},noMatch(){$('#setting').addClass('not-found')}})}}))};function f(){var e=$('.search-setting-holder .clear-search');e.prev().val().length<=0?e.removeClass('show'):e.addClass('show')}function h(){j();var e=i.serialize();$.post(ajaxurl,{action:'themify_save',data:e,nonce:themify_js_vars.nonce},function(){I(),$('body').triggerHandler('themify_save')})}$("#search-setting").on("input",d),$('.search-setting-holder .clear-search').on('click',function(){$(this).prev().val(''),d()}),$('.valid_num').on('keyup input paste',function(){!function(e){for(var t,i=!0,a=0;a<e.length&&!0===i;a++)t=e.charAt(a),-1===" 0123456789.+-".indexOf(t)&&(i=!1);return i}($(this).val())&&$(this).val($(this).val().substring(0,$(this).val().length-1))}),$('.save-button').on('click',function(e){return h(),!1}),0<i.length&&$(F).on('keydown',function(e){83!=e.which||1!=e.ctrlKey&&1!=e.metaKey||(e.preventDefault(),h())}),$('#reset-setting').on('click',function(e){e.preventDefault();e='reset-setting'!==$(this).prop('id')?'styling':'settings';confirm(themify_lang['confirm_reset_'+e])&&(j(),$.post(ajaxurl,{action:'themify_reset_'+e,data:i.serialize(),nonce:themify_js_vars.nonce},function(){I(),L.location.reload(!0)}))});{let t=F.tfId('tf_message'),i=localStorage.getItem('tf_message'),e=localStorage.getItem('tf_message_dismiss'),a=function(){t.className='show',t.innerHTML=i+' ';let e=F.createElement('a');e.href='#',e.textContent=t.dataset.dismiss,e.tfOn('click',e=>{e.preventDefault(),t.style.display='none',localStorage.setItem('tf_message_dismiss',1)}),t.appendChild(e)};t&&!e&&(null===i?$.ajax({url:'https://themify.me/public-api/update-message/index.txt',success(e){i=e,localStorage.setItem('tf_message',i),''!==i.trim()&&a()}}):''!==i&&a())}$('.themify_changelogs').on('click',function(e){e.preventDefault();e=$(this).data('changelog');$('.show-login, .show-error').hide(),$('.overlay, .prompt-box').fadeIn(300),$('.prompt-box iframe').remove(),$('.tb_alert').addClass('busy').fadeIn(300),$('<iframe src="'+e+'" />').on('load',function(){$('.tb_alert').removeClass('busy').fadeOut(300)}).prependTo('.prompt-box'),$('.prompt-box').addClass('show-changelog')}),$('.overlay').on('click',function(){$(this).add('.prompt-box').fadeOut()}),$(".feature-box-display").on('click',function(){"images"===$(this).val()?$(this).parent().parent().find(".feature_box_posts").fadeOut(200,function(){$(this).parent().parent().find(".feature_box_images").fadeIn(200)}):$(this).parent().parent().find(".feature_box_images").fadeOut(200,function(){$(this).parent().parent().find(".feature_box_posts").fadeIn(200)})}),$(".block-toggle").on('click',function(){var e=$(this),t=e.val(),i=e.data('hide');e.parent().parent().find('.feature_box_'+i).fadeOut(200,function(){e.parent().parent().find('.feature_box_'+t).fadeIn(200)})}),$(".feature_box_enabled_check").on('change',function(){'on'===$(this).val()?$(this).closest('fieldset').find(".feature_box_enabled_display").fadeIn(200):$(this).closest('fieldset').find(".feature_box_enabled_display").fadeOut(200)});var r=$('.box_enabled_check'),m=(r.on('click',function(){$(this).is(":checked")?$(this).parent().find(".box_enabled_display").fadeIn(200):$(this).parent().find(".box_enabled_display").fadeOut(200)}),r.is(":checked")&&r.parent().find(".box_enabled_display").show(),$('.disable_img_php'));m.on('click',function(){m.is(":checked")?($('.show_if_disabled_img_php').fadeIn(200),$('.show_if_enabled_img_php').fadeOut(200)):($('.show_if_disabled_img_php').fadeOut(200),$('.show_if_enabled_img_php').fadeIn(200))}),m.is(":checked")?$(".show_if_disabled_img_php").show():m.not(":checked")&&$(".show_if_enabled_img_php").show(),$('.gallery_lightbox_type').on('change',function(){1!=$('.gallery_lightbox_type').prop('selectedIndex')?$('.show_if_photoswipe_enabled').fadeOut(200):$('.show_if_photoswipe_enabled').fadeIn(200)}).trigger('change'),$("#skins .skin-preview").on('click',function(e){'INPUT'!==e.target.nodeName&&'LABEL'!==e.target.nodeName&&($(e.target).parent().hasClass('view-demo')||e.preventDefault(),$("#skins .skin-preview").removeClass('selected'),$(this).addClass('selected'),$("input[name='skin']").val($(this).attr('data-skin')))});var r=$('.featimgcontrol'),p=(0<r.length&&0<$('.featimgdropdown').length&&r.each(function(){$(this).append($(this).next('.featimgdropdown'))}),$('#social-link-type')),_=$('#social-links-wrapper'),u=$('#setting-link_field_ids'),g=$('#setting-link_field_hash'),v=($('input[value="font-icon"]',p).prop('checked')?($('.image-icon',_).fadeOut(),$('.font-icon',_).fadeIn()):($('.font-icon',_).fadeOut(),$('.image-icon',_).fadeIn()),$('input',p).on('click',function(){var e=$(this);e.prop('checked')&&($('.'+e.data('hide'),_).fadeOut(),$('.'+e.val(),_).fadeIn())}),_.length&&_.sortable({placeholder:'social-link-placeholder',handle:'.social-drag',update(){var e={};$('.social-link-item').each(function(){e[$(this).attr('id')]=$(this).attr('id')}),u.val(JSON.stringify(e))}}).on('click','.remove-item',function(e){e.preventDefault();var e=JSON.parse(u.val()),t=$(this).data('removelink');$('#'+t).remove(),delete e[t],u.val(JSON.stringify(e))}),$('.add-social-link a').on('click',e=>{const a=JSON.parse(u.val()),n=g.val(),s=parseInt(n),t=p[0].querySelector('input[value=font-icon]:checked')?'font-icon':'image-icon';e.preventDefault(),D.fetch({action:'themify_add_link_field',nonce:themify_js_vars.nonce,fid:s,type:t},'html').then(e=>{F.tfId('social-links-wrapper').appendChild(e);const t=F.tfId('themify-link-'+n),i=t.tfClass('plupload-upload-uic')[0];a['themify-link-'+n]='themify-link-'+n,u.val(JSON.stringify(a)),i&&themify_create_pluploader($(i)),L.Themify_Metabox.color_picker($(t)),g.val(s+1)})}),$('.slug-rewrite').each(function(){$(this).on('keypress',function(e){var t=new RegExp("^[a-z0-9_-]+$"),i=String.fromCharCode(e.charCode||e.which);if(!t.test(i))return e.preventDefault(),!1})}),{target:'',getDocHeight(){var e=F;return Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight))},showLightbox(e){var t=$(F).scrollTop()+80,i=$(".themify-admin-lightbox-"+e);i.length||($('.themify-admin-lightbox:first').clone().removeClass('themify-admin-lightbox-1').addClass('themify-admin-lightbox-'+e).data('item',e).insertAfter('.themify-admin-lightbox:last'),1<$('.themify-admin-lightbox').length&&$('.lightbox_container','.themify-admin-lightbox-'+e).html(''),(i=$(".themify-admin-lightbox-"+e)).removeClass('is-loaded')),$('#themify_lightbox_overlay').show(),i.hasClass('is-loaded')?(i.show().css('top',v.getDocHeight()).animate({top:t},800),$('.themify-visibility-toggle').html($('.themify-visibility-toggle').data('text'))):$.ajax({type:'POST',url:ajaxurl,data:{action:'themify_get_visibility_options',selected:v.target.val(),nonce:themify_js_vars.nonce},success(e){$('.lightbox_container',i).append(e),i.show().css('top',v.getDocHeight()).animate({top:t},800),$('#visibility-tabs',i).tabs(),$('#visibility-tabs .themify-visibility-inner-tabs',i).tabs(),$('.themify-visibility-toggle').html($('.themify-visibility-toggle').data('text'))}})},closeLightbox(e,t){$('.themify-admin-lightbox-'+e).animate({top:v.getDocHeight()},800,function(){$('#themify_lightbox_overlay').hide(),$('.themify-admin-lightbox-'+e).hide(),'function'==typeof t&&t()}).addClass('is-loaded')},clearOptions(){$('#themify_lightbox_visibility').find('.lightbox_container').empty()}});t.on('click','.themify-visibility-toggle',function(){var e=$(this),t=e.html();return e.html('<span class="tb_slider_loader_wrapper"><span class="tb_slider_loader"></span></span>'+t),v.target=$(this).next(),v.showLightbox($(this).data('item')),!1}).on('click','.themify_lightbox_visibility .close_lightbox, #themify_lightbox_overlay',function(){return v.closeLightbox($(this).parents('.themify_lightbox_visibility').data('item')),!1}),t.on('click','.themify-visibility-pagination a.page-numbers',function(e){e.preventDefault();var e=$(this),t=e.parents('.themify-visibility-options'),i=e.parents('.themify-visibility-items-inner'),a=$('.themify-visibility-pagination',i),n=parseFloat($('.themify-visibility-pagination .current',i).text()),s=1,o=(e.hasClass('next')?s=n+1:e.hasClass('prev')?s=n-1:e.hasClass('page-numbers')&&(s=parseFloat(e.text())),$('.themify-visibility-items-inner',t));$.ajax({url:ajaxurl,type:'post',data:{action:'themify_create_page_pagination',current_page:s,num_of_pages:i.data('pages'),nonce:themify_js_vars.nonce},beforeSend(){$('.tb_slider_loader',t).remove(),a.hide(),o.append('<div class="tb_slider_loader"></div>')},success(e){$('.tb_slider_loader',t).remove(),$('.themify-visibility-items-page',i).addClass('is-hidden'),$('.themify-visibility-items-page-'+s,i).removeClass('is-hidden'),a.html(e).show()}})}).on('click','#visibility-tabs .themify-visibility-tab',function(e){e.preventDefault();var t,i,a=$(this),n=$('#themify-original-conditions');a.data('active')||(e=a.data('type'),t=a.parents('#visibility-tabs').find('.themify-visibility-type-options[data-type='+e+']'),i=a.parents('.themify_lightbox_visibility').data('item'),i=$('#setting-hooks-'+i+'-visibility').val(),$.ajax({url:ajaxurl,type:'post',data:{action:'themify_create_inner_page',type:e,selected:i,nonce:themify_js_vars.nonce,original_values:n.val()},beforeSend(){t.html('<div class="tb_slider_loader"></div>')},success(e){e=JSON.parse(e),t.html(e.html),a.data('active','on'),n.val(e.original_values)}}))}).on('click','.visibility-save',function(){for(var e=$(this).parents('.themify_lightbox_visibility'),t=e.data('item'),i=$('form',e).serialize(),e=''===(e=$('#themify-original-conditions',e).val())?[]:e.split('&'),a=''===i?[]:i.split('&'),i=e.concat(a).concat(),n=0;n<i.length;++n)for(var s=n+1;s<i.length;++s)i[n]===i[s]&&i.splice(s--,1);return i=i.join('&'),$('.setting-hooks-'+t+'-visibility').val(i),v.target.val(i),v.closeLightbox($(this).parents('.themify_lightbox_visibility').data('item')),!1}).on('click','.themify_lightbox_visibility .uncheck-all',function(){$(this).before('<span class="tb_slider_loader_wrapper"><span class="tb_slider_loader"></span></span>');const e=$(this),t=e.parents('.themify_lightbox_visibility'),i=t.data('item');return $('#setting-hooks-'+i+'-visibility').val(''),$('#themify-original-conditions',t).val(''),$('input:checkbox',t).removeAttr('checked'),e.parent().find('.tb_slider_loader_wrapper').remove(),!1}),$('#setting-hooks').on('click','.remove-item',function(e){e.preventDefault();const i=JSON.parse($('#themify-hooks-field-ids').val()),a=$(this).closest('.social-link-item').fadeOut('fast',function(){const t=a.attr('data-id');for(let e in i)i.hasOwnProperty(e)&&i[e]==t&&i.splice(e,1);$('#themify-hooks-field-ids').val(JSON.stringify(i)),$('.themify-admin-lightbox-'+t).removeClass('is-loaded').find('.lightbox_container').html('')})}).on('click','.themify-add-hook a',function(e){e.preventDefault(),$(this).before('<span class="tb_slider_loader_wrapper"><span class="tb_slider_loader"></span></span>');let i=JSON.parse($('#themify-hooks-field-ids').val()),a=1;0<i.length?a=Math.max.apply(null,i)+1:i=[],$.ajax({url:ajaxurl,type:'post',data:{action:'themify_hooks_add_item',field_id:a,nonce:themify_js_vars.nonce},success(e){const t=$('#hook-content-list');i.push(a),$('#themify-hooks-field-ids').val(JSON.stringify(i)),$('#setting-hooks .tb_slider_loader_wrapper').remove(),t.append(e),$('textarea[name=setting-hooks-'+a+'-code]',t).html(''),$('select[name=setting-hooks-'+a+'-location] optgroup:first-child option[value=themify_body_start]',t).attr('selected',!0),1<t.find('li').length&&$('.themify-admin-lightbox:first').clone().removeClass('themify-admin-lightbox-1').addClass('themify-admin-lightbox-'+a).data('item',a).insertAfter('.themify-admin-lightbox:last'),$('.lightbox_container','.themify-admin-lightbox-'+a).html(''),$('#setting-hooks-'+a+'-visibility',t).val(''),$('.themify-admin-lightbox:last').removeClass('is-loaded'),t.find('li[data-id="'+a+'"] .tf_hook_repeat').hide()}})});const y=$('#hook-content-list');y.length&&y.sortable({placeholder:'social-link-placeholder',handle:'.social-drag',update(){var e=[];y.find('li').each(function(){e.push(parseInt($(this).attr('data-id')))}),$('#themify-hooks-field-ids').val(JSON.stringify(e))}}),$('body').on('click','.see-hook-locations',function(e){e.preventDefault(),L.tf_hook_target=this.closest('li').querySelector('select'),$.magnificPopup.open({items:[this],type:'iframe',iframe:{markup:"<div class=\"mfp-iframe-scaler\" style=\"max-width: 100% !important; height: 100%;\"><div role=\"button\" class=\"tf_close mfp-close\"></div><iframe id=\"tf_hook_location_iframe\" class=\"mfp-iframe\" frameborder=\"0\" allowfullscreen></iframe></div>"}})}).on('change','.tf_hook_location',function(){let e=$('option:selected',this).closest('optgroup').data('key');$(this).closest('li').find('.tf_hook_repeat').toggle('layout'!==e&&'general'!==e&&'ecommerce'!==e).find('span').eq(0).toggle('post_content'!==e).end().eq(1).toggle('post_content'===e)}).find('.tf_hook_location').each(function(){$(this).trigger('change')}),$('#setting-editor-gfonts-list').on('change',function(){$(this).next().val(JSON.stringify($(this).val()))}).trigger('change'),t.on('click','#demo-import-notice .skin-preview',function(e){$(e.target).parent().hasClass('view-demo')||e.preventDefault(),$("#demo-import-notice .skin-preview").removeClass('selected'),$(this).addClass('selected'),$('#skins .skin-preview[data-skin="'+$(this).data('skin')+'"]').trigger('click')}),$('.themify-modal .dismiss-import-notice').on('click',function(){return $(this).closest('.themify-modal').fadeOut(),F.body.classList.toggle('themify-modal-active',!1),!1}),(r=i).find('select').not('[multiple]').wrap('<div class="selectwrapper"></div>'),r.find('.selectwrapper').on('click',function(){$(this).toggleClass('clicked')}),t=$('#themify, .toplevel_page_themify-builder #wpbody-content').find('[data-show-if-element]').map(function(){return $(this).data('show-if-element')}).get().filter(function(e,t,i){return t===i.indexOf(e)}),$.each(t,function(e,t){var i=t;C(i),$(F).on('change',i,function(e){C(i)})}),$('.js-clear-cache').on('click',function(e){e.preventDefault();const t=$(this);t.hasClass('disabled')||(t.addClass('disabled').find('span').text(t.data('clearing-text')).end().find('i').removeClass().addClass('tf_loader'),D.fetch({action:this.dataset.action,data:'all'===this.dataset.send?i.serialize():'',nonce:themify_js_vars.nonce}).then(e=>{e&&e.error&&alert(e.error),t.find('span').text(t.data('done-text')).end().find('i').removeClass(),e&&e.remove_after?setTimeout(()=>{t.closest('.pushlabel').remove()},3e3):setTimeout(()=>{t.find('span').text(t.data('default-text')).end().find('i').removeClass().addClass(t.data('default-icon')).end()},3e3)}).finally(()=>{t.removeClass('disabled')}))}),$('.input-range .range-slider').each(function(){let i=$(this),a=i.next(),n=!!a.data('range');i.slider({range:n,min:a.data('min'),max:a.data('max'),values:a.val().split('-'),slide(e,t){t.values[0]!=t.values[1]&&n?a.val(t.values[0]+'-'+t.values[1]):a.val(t.values[0])}}),a.on('keyup',function(){const e=$(this),t=parseInt(e.val());t<parseInt(e.data('default-min'))&&i.slider("option","min",t),t>parseInt(e.data('default-max'))&&i.slider("option","max",t),i.slider("values",[t])})}),void 0!==L.wp&&void 0!==L.wp.media&&void 0!==wp.media.featuredImage&&($('body').on('themify_metabox_lib_selected',function(e,t,i,a){t.data('submit').featured&&wp.media.featuredImage.set(i.id)}).on('themify_plupload_selected',function(e,t,i){t.data('featured')&&wp.media.featuredImage.set(i.id)}).on('themify_wp_media_featured_image_set',function(e,t,i){const a=$('#post_image').closest('.themify_field_row');-1==t?a.find('.themify_featimg_remove a').trigger('click'):themifyMediaLib.setPreviewIcon(a,$(i).find('#set-post-thumbnail img').attr('src'))}),$('#post_image').closest('.themify_field_row').find('.themify_featimg_remove a').on('click',function(){$('#remove-post-thumbnail').trigger('click')}),wp.media.featuredImage.set=function(t){var e=wp.media.view.settings;e.post.featuredImageId=t,wp.media.post('get-post-thumbnail-html',{post_id:e.post.id,thumbnail_id:e.post.featuredImageId,_wpnonce:e.post.nonce}).done(function(e){'0'==e?alert(L.setPostThumbnailL10n.error):($('.inside','#postimagediv').html(e),$('body').triggerHandler('themify_wp_media_featured_image_set',[t,e]))})});{const S=F.tfId('builder-regenerate-css-files');S&&S.tfOn('click',async e=>{const t=e.currentTarget,i=t.value;if(!t.disabled){t.value='Regenerating ...',t.disabled=!0,await D.loadJs(D.url+'js/admin/notification',!!L.TF_Notification),TF_Notification.show('info','Regenerating ...');try{const a=await D.fetch({nonce:themify_js_vars.nonce,action:'themify_regenerate_css_files_ajax',all:F.querySelector('#tmp_regenerate_all_css:checked')?1:0});if(!a.success)throw a;await TF_Notification.showHide('done','Done',1500)}catch(e){const n=e.data||e;await TF_Notification.showHide('error',n)}t.value=i,t.disabled=!1}},{passive:!0})}$('#builder-find-and-replace-btn').on('click',async e=>{const t=e.currentTarget.classList;if(!t.contains('disabled')){if(t.add('disabled'),''===$('#original_string').val())alert('Please fill original value for search!');else if(confirm("WARNING: This will replace all data in your database. It can not be undone. Please backup your database before proceeding."))try{await async function(){D.loadJs(D.url+'js/admin/notification',!!L.TF_Notification);const e=F.tfId('original_string').value.trim(),t=F.tfId('replace_string').value.trim();return await D.loadJs(D.url+'js/admin/modules/find-replace',!!L.TF_Replace),TF_Replace(e,t,themify_js_vars.nonce)}()}catch(e){}t.remove('disabled')}});{const N=F.tfId('setting-page_builder_maintenance_page');null!==N&&N.tfOn('mousedown',function(t){var i=this;$.ajax({url:ajaxurl,type:'POST',data:{action:'themify_load_maintenance_pages',nonce:themify_js_vars.nonce},success(e){i.innerHTML=e,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&(i.blur(),i.dispatchEvent(t))}})},{once:!0,passive:!0})}const b=F.tfId('tb_option_flush_twitter'),k=(b&&b.tfOn('click',e=>{e.preventDefault(),j(),D.fetch({action:'themify_twitter_flush',nonce:themify_js_vars.nonce}).finally(()=>{I()})}),F.tfId('tf_font_import_notice')),x=F.tfId('tf_font_size_slider_wrap');if(k&&$(k).insertAfter('.wp-header-end'),x){$("#tf_font_size_slider_wrap").appendTo('th#font_preview');let t=F.tfId('tf_font_preview_style'),e=localStorage.getItem('tf_font_preview_size')||1,i=function(e){t.innerText='.font_preview span { font-size: '+e+'em; }'};i(e),$("#tf_font_size_slider").slider({value:e,min:.5,max:4,step:.1,slide(e,t){i(t.value),localStorage.setItem('tf_font_preview_size',t.value)}})}let w=F.tfClass('generate-child-theme');for(let t=0;t<w.length;t++)w[t].tfOn('click',e=>{e.preventDefault(),confirm(w[t].dataset.confirm)&&(j(),$.ajax({url:ajaxurl,type:'POST',data:{action:'themify_generate_child_theme',nonce:themify_js_vars.nonce,import_customizer:w[t].closest('div').querySelector('input[type="checkbox"]').checked?1:0},success:e=>{I(),e.success?(w[t].classList.add('disabled'),w[t].closest('.tf_generate_child_theme').classList.add('tf_done')):alert(e.data[0].message)}}))});function C(e){$('[data-show-if-element="'+e+'"]').each(function(){var e=$(this),t=e.data('show-if-value'),i=$(e.data('show-if-element').toString());i.length<=0||(i=i.is(':checkbox')?i.is(':checked')?'true':'false':i.is(':radio')?i.filter(':checked').val():i.val().trim(),t=Array.isArray(t)?t:[t.toString()],void 0!==i&&-1!==$.inArray(i,t)?e.slideDown({duration:200}):e.slideUp({duration:200}))})}function j(){const e=F.tfClass('tb_alert')[0];e&&!e.classList.contains('busy')&&(e.classList.add('busy'),$(e).fadeIn(800))}function I(e){const t=$(".tb_alert").removeClass("busy");if('error'===e)e='error';else{if('hide'===e)return t[0].style.display='none',setTimeout(()=>{t[0].style.display=''},200);e='done'}t.addClass(e).delay(800).fadeOut(800,function(){$(this).removeClass(e)})}$(function(){const e=$('#themify .preview-icon');e.length&&e.each(function(){var e=$(this),t=e.attr('title');e.removeAttr('title').append('<span class="tm-option-title-fw">'+t+'</span>')})}),$('#themify_feed_settings select').on('change',function(){$(this).next().val($(this).val().join(','))}),D.on('themify_erase_content',async function e(t){j(),await D.loadJs(D.url+'js/admin/notification',!!L.TF_Notification),await TF_Notification.show('info',themify_js_vars.erase.processing);try{const i=await D.fetch({action:'themify_erase_content',nonce:themify_js_vars.nonce,data:{keep_modify:t?1:0}});if(!i.success)throw'error';if('repeat'===i.data)await e(t);else if(I('done'),await TF_Notification.showHide('done',themify_js_vars.erase.done,2e3),'hasdemo'!==i.data)for(let e=F.tfClass('skin-erase-link'),t=e.length-1;-1<t;--t)e[t].parentNode.tfClass('tf_erase_box')[0].remove(),e[t].remove()}catch(e){const a='string'==typeof e?e:'';throw await TF_Notification.showHide('error',themify_js_vars.erase.error.replace('%error%',a),4e3),e}}),F.tfOn('click',async e=>{const t=['.license-link','.themify-ajax-installer','.update-license.themify_button','.skin-demo-import','.skin-erase-demo','.import-sample-content','.erase-sample-content'].join(','),i=e.target?e.target.closest(t):null;if(i){e.preventDefault();const a=i.classList;try{if(!a.contains('disabled')){a.add('disabled'),D.loadJs(D.url+'js/admin/notification',!!L.TF_Notification);const n=D.url+'js/admin/modules/';if(a.contains('license-link')||a.contains('update-license'))await D.loadJs(n+'license',!!L.TF_License),a.contains('update-license')?(j(),await TF_License.update(),'undefined'!=typeof ThemifyUpdater&&ThemifyUpdater.updateThemeBtn(),I('done'),void 0===F.tfClass('required-addons')[0]&&setTimeout(()=>{L.location.reload()},100)):TF_License.init();else if(a.contains('erase-sample-content')||a.contains('skin-erase-demo')){let e=i.closest('.tf_erase_box');e=e&&e.querySelector('.tf_modify_demo:checked'),await D.trigger('themify_erase_content',!!e)}else if(a.contains('themify-ajax-installer'))j(),await D.loadJs(D.url+'js/admin/modules/install-updater',!!L.TF_Install_Updater),await TF_Install_Updater(themify_js_vars.nonce),I('done'),setTimeout(()=>{L.location.reload()},100);else if(a.contains('skin-demo-import')||a.contains('import-sample-content')){j(),await D.loadJs(n+'skin',!!L.TF_Skin);const s={},o=(null===F.tfId('license-modal')&&(s.license=1),i.dataset.plugins&&(s.plugins=i.dataset.plugins),i.dataset.id&&(s.skin=i.dataset.id),await TF_Skin.init(s));I('open'===o?'hide':'done')}}}catch(e){I('error')}finally{a.remove('disabled')}}})})})(Themify,jQuery,window,document);