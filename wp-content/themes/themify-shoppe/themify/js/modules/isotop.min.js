((b,C,w,S)=>{'use strict';let x=null,g=null,y=null,h=!1,c=null;const _={'list-post':100,'list-large-image':100,'list-thumb-image':100,grid2:48.4,'grid2-thumb':48.4,grid3:31.2,grid4:22.6,grid5:17.44,grid6:14},N=new Set;b.on('tf_isotop_init',(s,o)=>{for(let a=(s=s.length===S?[s]:s).length-1;-1<a;--a)b.requestIdleCallback(()=>{{var t=s[a],e=o;e&&'object'==typeof e||('0'===(e={layoutMode:t.dataset.layout,gutter:t.dataset.gutter,columnWidth:t.dataset.column,itemSelector:t.dataset.selector,fitWidth:'1'===t.dataset.fit,percentPosition:'0'!==t.dataset.percent}).gutter&&(e.gutter=!1),'0'===e.columnWidth&&(e.columnWidth=!1)),e.layoutMode||(t.classList.contains('packery-gallery')?(e.layoutMode='packery',e.columnWidth=e.gutter=!1):t.classList.contains('masonry-fit-rows')&&(e.layoutMode='fitRows'));const u={originLeft:!b.isRTL,resize:!1,containerStyle:null,onceLayoutComplete:e.onceLayoutComplete,layoutComplete:e.layoutComplete,arrangeComplete:e.arrangeComplete,removeComplete:e.removeComplete,filterCallback:e.filterCallback,stagger:e.stagger||30,itemSelector:e.itemSelector},f=e.layoutMode||'masonry';u.layoutMode=f,u[f]={columnWidth:e.columnWidth,gutter:e.gutter},u.itemSelector||(u.itemSelector=t.classList.contains('products')?'.products>.product':t.classList.contains('gallery-wrapper')?'.item':'.loops-wrapper > .post'),!0===e.fitWidth&&(u[f].fitWidth=!0),e.stamp&&(u.stamp=e.stamp),!0===e.fitWidth?u.percentPosition=!1:u.percentPosition=e.percentPosition===S||e.percentPosition,b.imagesLoad(t).then(a=>{const t=a.previousElementSibling;let s='',e=0,o=!1!==u[f].gutter&&!a.classList.contains('no-gutter'),i=a.tfClass('gutter-sizer')[0];const l=Isotope.data(a),n=()=>{i&&(i.remove(),i=!1)};if(l&&(l.destroy(),n()),a.classList.contains('auto_tiles'))null!==t&&t.classList.contains('post-filter')&&b.trigger('themify_isotop_filter',[t,S,u.filterCallback]);else{for(let t=a.classList,e=t.length-1;-1<e;--e)if(_[t[e].trim()]!==S){s=t[e].trim();break}if('list-post'===s||'list-large-image'===s||'list-thumb-image'===s){if(null===t||!t.classList.contains('post-filter'))return void n();o=!1}if(!N.has('masonry_done')){N.add('masonry_done');const d='.masonry>.post,.products.masonry>.product{animation-fill-mode:backwards;transition:none;animation:none;clear:none!important;margin-right:0!important;margin-left:0!important}.masonry-done{opacity:1}';null===x?((x=w.createElement('style')).innerText=d,w.head.prepend(x)):x.innerText+=d}if(!0===o){if(i?e=i:((e=w.createElement('div')).className='gutter-sizer',a.prepend(e)),!a.classList.contains('tf_fluid')){let e='';const p=a.classList.contains('products'),m=a.classList.contains('gutter-narrow')?1.6:3.2;if(!N.has(m+p)){N.add(m+p);let t=p?'.products':'';1.6==m&&(t+='.gutter-narrow'),''!==t&&(t+='>'),e+=t+'.gutter-sizer{width:'+m+'%}'}N.has('contain')||(N.add('contain'),e+='.gutter-sizer{contain:paint style size}@media (max-width:680px){.gutter-sizer{width:0}}'),e&&(x.innerText=e+x.innerText)}}else n();u[f].gutter=e,a.classList.add('masonry-done','tf_rel');const c=new Isotope(a,u);var r=a;null===y&&(y=new ResizeObserver((a,e)=>{setTimeout(()=>{!0!==h&&(null!==g&&cancelAnimationFrame(g),h=!0,g=requestAnimationFrame(()=>{for(let t=a.length-1;-1<t;--t)if(a[t].target.isConnected){let e=a[t].target.closest('.masonry-done');if(e){let t=C.Isotope.data(e);t&&t.layout()}}else e.unobserve(a[t].target);h=!1}))},800)})),setTimeout(()=>{y.observe(r)},300),null!==t&&t.classList.contains('post-filter')&&b.trigger('themify_isotop_filter',[t,c,u.filterCallback]),c.revealItemElements(c.items),u.onceLayoutComplete&&c.once('layoutComplete',u.onceLayoutComplete),u.layoutComplete&&c.on('layoutComplete',u.layoutComplete),u.arrangeComplete&&c.on('arrangeComplete',u.arrangeComplete),u.removeComplete&&c.on('removeComplete',u.removeComplete),c.layout()}})}},-1,500)}).on('themify_isotop_filter',(g,t,y)=>{if(!g.dataset.done){g.dataset.done=1;const c=g.children,h=c.length,o=g.nextElementSibling,_=g.hasAttribute('data-ajax'),v=!0===_&&g.hasAttribute('data-sort');let s=0;if(!N.has('post_filter')){N.add('post_filter');const e='.post-filter{transition:opacity .2s ease-in-out}';null===x?((x=w.createElement('style')).innerText=e,w.head.prepend(x)):x.innerText+=e}if(!1===_)for(let a=h-1;-1<a;--a){let t=c[a].className.replace(/(current-cat)|(cat-item)|(-)|(active)/g,'').replace(' ',''),e=o.querySelector('.cat-'+t);null===e||e.parentNode!==o?(c[a].style.display='none',++s):c[a].style.display=''}if(1<h-s?(g.classList.remove('tf_opacity'),g.style.display=''):g.style.display='none',t||o.classList.contains('auto_tiles')){let f;const L=function(d){d.preventDefault(),g.parentNode.classList.remove('tb_hide_loadmore');const p=d.target.closest('.cat-item');if(p){let c='*';const m=this.nextElementSibling;if(p.classList.contains('active')){if(p.classList.remove('active'),!0===v)return void b.triggerEvent(g.querySelector('.cat-item-all'),'click')}else{const t=this.querySelector('.cat-item.active');if(t&&t.classList.remove('active'),p.classList.contains('cat-item-all')||(c=p.className.replace(/(current-cat)|(cat-item)|(-)|(active)/g,'').replace(' ','')),p.dataset.p||(p.dataset.p=1),!0===_&&(p.dataset.done&&g.parentNode.classList.add('tb_hide_loadmore'),p.dataset.empty?g.parentNode.classList.add('tb_empty_filter'):g.parentNode.classList.remove('tb_empty_filter')),!(!0!==_||p.dataset.done||p.dataset.loading||p.dataset.init)){p.dataset.init=!0,p.dataset.loading=!0,m.parentNode.classList.contains('tf_ajax_filter_loading')?f.abort():m.parentNode.classList.add('tf_ajax_filter_loading'),f=new AbortController;const u=this,e=new FormData;if(e.set('action','themify_ajax_load_more'),e.set('type','module'),e.set('module',g.dataset.el),e.set('id',g.dataset.id),e.set('page',p.dataset.p),'*'!==c&&e.set('tax',c),!0===v){const a=g.querySelector('.tf_ajax_sort_order.active'),s=g.querySelector('.tf_ajax_sort_order_by .active');a&&e.set('order',a.dataset.type),s&&e.set('orderby',s.dataset.orderBy)}return void b.fetch(e,'html',{signal:f.signal}).then(t=>{const e=t.querySelector('.'+g.dataset.el+' .loops-wrapper'),a=t.querySelector('.load-more-button');let s,o;if(null!==e){s=b.convert(e.children);const i=w.createDocumentFragment(),l=s.length;if(s[0]!==S){for(let t=0;t<l;++t)s[t].className+=' tf_opacity',i.appendChild(s[t]);g.dataset.reload&&(o=m.querySelectorAll('.post'),delete g.dataset.reload),m.appendChild(i)}if(null===a)p.dataset.done=!0,g.parentNode.className+=' tb_hide_loadmore';else if('*'===c){const n=m.parentNode.querySelector('.load-more-button');n&&(n.href=n.dataset.url,n.dataset.page=a.dataset.page)}if(0<s.length)p.dataset.p=parseInt(p.dataset.p)+1,b.trigger('tf_isotop_append',[{new:s,remove:o},m,()=>{m.parentNode.classList.remove('tf_ajax_filter_loading'),L.bind(u)(d)}]);else{if(p.dataset.empty=!0,null===m.parentNode.querySelector('.tb_empty_filter_msg')){const r=w.createElement('span');r.className='tb_empty_filter_msg tf_hide',r.innerText=themify_vars.nop,m.parentNode.appendChild(r)}m.parentNode.classList.remove('tf_ajax_filter_loading'),L.bind(u)(d)}}}).catch(t=>{console.warn('Ajx filter error!',t)})}!0===_&&p.dataset.loading&&delete p.dataset.loading,p.className+=' active'}if(null!==m){g.hasAttribute('data-hash')&&(p.classList.contains('active')&&p.dataset.id?location.hash=p.dataset.id:-1<C.location.hash.indexOf(g.dataset.hash)&&C.history.pushState('','',C.location.pathname));let e=C.Isotope.data(m);if(m.classList.contains('auto_tiles')){const o=m.children;for(let t=o.length-1;-1<t;--t)o[t].classList.contains('post')&&!o[t].style.width&&(o[t].style.width=o[t].offsetWidth+'px',o[t].style.height=o[t].offsetHeight+'px');if(m.classList.add('masonry-done'),!e){let t;b.w<680?t=0:(t=C.getComputedStyle(m).getPropertyValue('grid-row-gap'))?t=parseFloat(t):'0'!=t&&(t=5),e=new Isotope(m,{layoutMode:'packery',packery:{gutter:t},resize:!1})}if('*'===c){const i=function(){this.off('arrangeComplete',i),setTimeout(()=>{if('*'===c){const a=this.element.children;for(let e=a.length-1;-1<e;--e)if(a[e].classList.contains('post')){let t=a[e].style;t.width=t.height=t.position=t.left=t.top=''}this.element.classList.remove('masonry-done'),this.element.style.height=this.element.style.position=''}},20)};e.once('arrangeComplete',i)}}e&&(c=!0===_?'*'===c?'.initial-cat':'.ajax-cat-'+c:'*'===c?c:'.cat-'+c.trim()+',.cat-all',e.arrange({filter:c}),y&&y.call(e,p,c))}}else if(!0===v){const l=d.target.closest('.tf_ajax_sort_order')||d.target.closest('[data-order-by]')?d.target:null;if(null!==l&&!l.classList.contains('active')){const n=l.parentNode.querySelector('.active');n&&n.classList.remove('active'),l.className+=' active';for(let t=h-1;-1<t;--t)delete c[t].dataset.init,delete c[t].dataset.done,delete c[t].dataset.p;g.dataset.reload=!0;const r=g.querySelector('.cat-item.active')||g.querySelector('.cat-item-all');r&&(r.classList.remove('active'),b.triggerEvent(r,'click'))}}},a=(g.tfOn('click',L),C.location.hash.replace('#',''));if(''!==a&&'#'!==a){const i=g.querySelector('[data-id="'+a+'"]');i&&i.click()}}}}).on('tf_isotop_append',(s,o,i)=>{const l=s.new.length,n=C.Isotope!==S?C.Isotope.data(o):null;null===c&&(c=/^((?!chrome|android).)*safari/i.test(navigator.userAgent));let r=0;for(let a=0;a<l;++a)s.new[a].style.display='none',b.imagesLoad(s.new[a]).then(t=>{if(c){const e=t.querySelector('img[srcset]');null!==e&&(e.outerHTML=e.outerHTML)}if(++r,n&&n.appended(t),s.new[a].classList.remove('tf_opacity'),r===l){(n||o.classList.contains('auto_tiles'))&&(o.classList.contains('auto_tiles')&&b.autoTiles(o),n&&s.remove&&n.remove(s.remove));for(let t=0;t<l;++t)b.lazyScroll(b.convert(b.selectWithParent('[data-lazy]',s.new[t])).reverse(),!0);b.fonts(),i()}})})})(Themify,window,document,void 0);