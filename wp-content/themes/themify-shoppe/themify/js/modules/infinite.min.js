(($,x,L,S,j)=>{'use strict';let E=null,l=null;const I=new Set,T=(t,e)=>{null===l&&(l=new IntersectionObserver((e,t)=>{for(let t=e.length-1;-1<t;--t)!0===e[t].isIntersecting&&L.history.replaceState(null,null,e[t].target.dataset.tfHistory)},{rootMargin:'100% 0px -100% 0px'})),t.dataset.tfHistory=w(e),l.observe(t)},w=t=>x.updateQueryString('tf-scroll',null,t),N=t=>x.updateQueryString('tf-scroll',1,t),o=v=>{if(!0!==v.isWorking){v.isWorking=!0,v.status.classList.add('tf_scroll_request');let t,e='GET',l;if(v.filter){const a=v.filter.hasAttribute('data-sort'),i=v.filter.querySelector('.cat-item.active');if(i){if(v.ajax_loading=i,l={action:'themify_ajax_load_more',module:v.filter.dataset.el,id:v.filter.dataset.id,page:i.dataset.p},!i.classList.contains('cat-item-all')){const n=i.className.replace(/(current-cat)|(cat-item)|(-)|(active)/g,'').replace(' ','');l.tax=n.trim()}if(a){const s=v.filter.querySelector('.tf_ajax_sort_order.active'),o=v.filter.querySelector('.tf_ajax_sort_order_by .active');s&&(l.order=s.dataset.type),o&&(l.orderby=o.dataset.orderBy)}e='POST',t=themify_vars.ajax_url}}v.ajax_loading||(t=N(v.button.href)),x.fetch(l,'html',{method:e},t).then(t=>{const e=t.querySelector(v.id),l=w(v.button.href),a=v.container;let i=null;if(null!==e){var n=a,s=!!v.ajax_loading;if(x.lazyScroll(x.selectWithParent('[data-lazy]',n),!0),!s&&L.Isotope!==j){const g=L.Isotope.data(n);if(g){const h=n.previousElementSibling;if(null!==h&&h.classList.contains('post-filter')){const m=h.querySelector('.cat-item.active:not(.cat-item-all)');null!==m&&$(m).trigger('click.tf_isotop_filter')}}}x.triggerEvent(n,'infinitebeforeloaded',{d:t}).trigger('infinitebeforeloaded',[n,t]);const f=S.createDocumentFragment(),u=x.convert(e.children);if(!(i=!(i=e.tfClass('load-more-button')[0]||e.nextElementSibling)||(i=i.classList.contains('load-more-button')?i:i.children[0])&&i.classList.contains('load-more-button')?i:null)||'A'===i.tagName||(i=i.children[0])&&'A'===i.tagName||(i=null),u[0]!==j){for(let t=0,e=u.length;t<e;++t)f.appendChild(u[t]);a.appendChild(f),v.history&&T(u[0],l);{var o=u;var r=a;var c=v;const p=o.length,_=L.Isotope!==j?L.Isotope.data(r):null;null===E&&(E=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),o[0].className+=' tf_firstitem';var d=0;for(let t=0;t<p;++t)o[t].style.opacity=0,x.imagesLoad(o[t]).then(t=>{if(E){const e=t.querySelector('img[srcset]');null!==e&&(e.outerHTML=e.outerHTML)}if(++d,_&&_.appended(t),t.style.opacity='',d===p){if(_||r.classList.contains('auto_tiles')){if(!c.ajax_loading){const l=r.previousElementSibling;null!==l&&l.classList.contains('post-filter')&&x.trigger('themify_isotop_filter',[l])}r.classList.contains('auto_tiles')&&x.autoTiles(r)}for(let t=0;t<p;++t)x.lazyScroll(x.convert(x.selectWithParent('[data-lazy]',o[t])).reverse(),!0);if(x.triggerEvent(r,'infiniteloaded',{items:o}).trigger('infiniteloaded',[r,o]),'scroll'===c.scrollToNewOnLoad){let t=r.tfClass('tf_firstitem'),e=(t=t[t.length-1],$(t).offset().top);const a=800<=e?800+Math.abs(e/10):800,i=S.tfId('headerwrap');null!==i&&(i.classList.contains('fixed-header')||S.body.classList.contains('fixed-header'))&&(e-=$(i).outerHeight(!0)),(!1===c.scrollThreshold||e-S.docElement.scrollTop>c.scrollThreshold)&&x.scrollTo(e,a)}x.fonts(),x.wpEmbed(S.tfClass('wp-embedded-content')),x.largeImages()}})}}else i=null;v.ajax_loading&&null===i&&(v.ajax_loading.dataset.done=!0,v.filter.parentNode.classList.add('tb_hide_loadmore'))}if(v.ajax_loading)v.ajax_loading.dataset.p=parseInt(v.ajax_loading.dataset.p)+1,v.isWorking=null;else{if(null===i)v.button.remove(),v.button=null;else{const b=N(i.href);v.prefetchBtn===j||I.has(b)||(I.add(b),v.prefetchBtn.setAttribute('href',b)),v.button.href=b,L.tfOn('scroll',t=>{v.isWorking=null},{passive:!0,once:!0})}if(L.ga!==j){const y=S.createElement('a');y.href=l,ga('set','page',y.pathname),ga('send','pageview')}v.history&&L.history.replaceState(null,null,l)}return v.status.classList.remove('tf_scroll_request'),e}).catch(t=>{console.warn('InfiniteScroll error.',t)})}};x.loadCss(x.url+'/css/modules/infinite','tf_infinite'),x.on('tf_infinite_init',(t,i)=>{const n=t.length!==j?t:[t];for(let l=n.length-1;-1<l;--l){let t=n[l],e=t.tfClass('load-more-button')[0],a=S.createElement('div');if(e=e||t.nextElementSibling){let l=e;if((e.classList.contains('load-more-button')||(e=e.children[0])&&e.classList.contains('load-more-button'))&&('A'===e.tagName||(e=e.children[0])&&'A'===e.tagName)){if(i.id||(i.id=t.id,i.id=i.id?'#'+i.id:'.'+t.className.split(' ').join('.')),a.className='tf_load_status tf_loader tf_clear tf_hide',t.after(a),i.status=a,i.button=e,(i.container=t).classList.contains('tb_ajax_pagination')){const s=t.previousElementSibling;s&&s.classList.contains('post-filter')&&(i.filter=s)}!1!==i.scrollThreshold?L.tfOn('scroll',()=>{const t=S.createElement('link'),e=N(i.button.getAttribute('href'));var a;t.setAttribute('as','document'),t.rel='prefetch',t.href=e,i.button.after(t),i.prefetchBtn=t,I.add(e),T(i.container.children[0],L.location.href),a=i,new IntersectionObserver((e,l)=>{for(let t=e.length-1;-1<t;--t)!0===e[t].isIntersecting&&(null===a.button?l.disconnect():o(a))},{threshold:.1}).observe(l)},{passive:!0,once:!0}):(T(t.children[0],L.location.href),e.tfOn('click',t=>{t.preventDefault(),delete i.ajax_loading,o(i)}).style.display='inline-block')}}}})})(jQuery,Themify,window,document,void 0);