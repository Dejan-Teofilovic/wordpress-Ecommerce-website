(function(a){'use strict';const b=a.Utils,c={setTranslate(){if(!this.params.scrollbar.el||!this.scrollbar.el)return;const a=this.scrollbar,b=a.dragSize,c=a.trackSize,d=a.$dragEl,e=a.$el;let f=b,g=(c-b)*this.progress;this.rtlTranslate?(g=-g,0<g?(f=b-g,g=0):-g+b>c&&(f=c+g)):0>g?(f=b+g,g=0):g+b>c&&(f=c-g),this.isHorizontal()?d.transform("translate3d("+g+"px, 0, 0)")[0].style.width=f+"px":d.transform("translate3d(0, "+g+"px, 0)")[0].style.height=f+"px",this.params.scrollbar.hide&&(clearTimeout(a.timeout),e[0].style.opacity=1,a.timeout=setTimeout(function(){e[0].style.opacity=0,e.transition(400)},1e3))},setTransition(a){this.params.scrollbar.el&&this.scrollbar.el&&this.scrollbar.$dragEl.transition(a)},updateSize(){if(!this.params.scrollbar.el||!this.scrollbar.el)return;const a=this.scrollbar,c=this.params.scrollbar,d=a.$dragEl[0],e=a.$el[0];d.style.width="",d.style.height="";const f=this.isHorizontal()?e.offsetWidth:e.offsetHeight,g=this.size/this.virtualSize,h=g*(f/this.size);let i;i="auto"===c.dragSize?f*g:parseInt(c.dragSize,10),this.isHorizontal()?d.style.width=i+"px":d.style.height=i+"px",e.style.display=1<=g?"none":"",c.hide&&(e.style.opacity=0),b.extend(a,{trackSize:f,divider:g,moveDivider:h,dragSize:i}),a.$el[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](c.lockClass)},getPointerPosition(a){return this.isHorizontal()?"touchstart"===a.type||"touchmove"===a.type?a.targetTouches[0].clientX:a.clientX:"touchstart"===a.type||"touchmove"===a.type?a.targetTouches[0].clientY:a.clientY},setDragPosition(a){const b=this.scrollbar,c=b.dragSize,d=b.dragStartPos;let e=(b.getPointerPosition(a)-b.$el.offset()[this.isHorizontal()?"left":"top"]-(null===d?c/2:d))/(b.trackSize-c);e=Math.max(Math.min(e,1),0),this.rtlTranslate&&(e=1-e);const f=this.minTranslate()+(this.maxTranslate()-this.minTranslate())*e;this.updateProgress(f),this.setTranslate(f),this.updateActiveIndex(),this.updateSlidesClasses()},onDragStart(a){const b=this.params.scrollbar,c=this.scrollbar,d=c.$el,e=c.$dragEl;c.isTouched=!0,c.dragStartPos=a.target===e[0]||a.target===e?c.getPointerPosition(a)-a.target.getBoundingClientRect()[this.isHorizontal()?"left":"top"]:null,a.preventDefault(),a.stopPropagation(),this.$wrapperEl.transition(100),e.transition(100),c.setDragPosition(a),clearTimeout(c.dragTimeout),d.transition(0),b.hide&&d.css("opacity",1),this.params.cssMode&&this.$wrapperEl.css("scroll-snap-type","none"),this.emit("scrollbarDragStart",a)},onDragMove(a){const b=this.scrollbar;b.isTouched&&(a.preventDefault?a.preventDefault():a.returnValue=!1,b.setDragPosition(a),this.$wrapperEl.transition(0),b.$el.transition(0),b.$dragEl.transition(0),this.emit("scrollbarDragMove",a))},onDragEnd:function(a){const c=this.params.scrollbar,d=this.scrollbar,e=d.$el;d.isTouched&&(this.scrollbar.isTouched=!1,this.params.cssMode&&this.$wrapperEl.css("scroll-snap-type","").transition(""),c.hide&&(clearTimeout(d.dragTimeout),d.dragTimeout=b.nextTick(function(){e.css("opacity",0).transition(400)},1e3)),this.emit("scrollbarDragEnd",a),c.snapOnRelease&&this.slideToClosest())},enableDraggable(){if(this.params.scrollbar.el){const a=this.scrollbar,b=this.touchEventsTouch,c=this.touchEventsDesktop,d=this.params,e=a.$el[0],f=!!d.passiveListeners&&{passive:!1,capture:!1},g=!!d.passiveListeners&&{passive:!0,capture:!1};this.support.touch?(e.addEventListener(b.start,a.onDragStart,f),e.addEventListener(b.move,a.onDragMove,f),e.addEventListener(b.end,a.onDragEnd,g)):(e.addEventListener(c.start,a.onDragStart,f),document.addEventListener(c.move,a.onDragMove,f),document.addEventListener(c.end,a.onDragEnd,g))}},disableDraggable(){if(this.params.scrollbar.el){const a=this.scrollbar,b=this.touchEventsTouch,c=this.touchEventsDesktop,d=this.params,e=a.$el[0],f=!!d.passiveListeners&&{passive:!1,capture:!1},g=!!d.passiveListeners&&{passive:!0,capture:!1};this.support.touch?(e.removeEventListener(b.start,a.onDragStart,f),e.removeEventListener(b.move,a.onDragMove,f),e.removeEventListener(b.end,a.onDragEnd,g)):(e.removeEventListener(c.start,a.onDragStart,f),document.removeEventListener(c.move,a.onDragMove,f),document.removeEventListener(c.end,a.onDragEnd,g))}},init(){if(!this.params.scrollbar.el)return;const a=this.scrollbar,c=this.$el,d=this.params.scrollbar;let e=this.$(d.el);this.params.uniqueNavElements&&"string"==typeof d.el&&1<e.length&&1===c.find(d.el).length&&(e=c.find(d.el));let f=e.find("."+d.dragClass);0===f.length&&(f=this.$("<div class=\""+d.dragClass+"\"></div>"),e.append(f)),b.extend(a,{$el:e,el:e[0],$dragEl:f,dragEl:f[0]}),d.draggable&&a.enableDraggable()},destroy:function(){this.scrollbar.disableDraggable()}},d={name:"scrollbar",params:{scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"tf_swiper-scrollbar-lock",dragClass:"tf_swiper-scrollbar-drag"}},create(){b.extend(this,{scrollbar:{init:c.init.bind(this),destroy:c.destroy.bind(this),updateSize:c.updateSize.bind(this),setTranslate:c.setTranslate.bind(this),setTransition:c.setTransition.bind(this),enableDraggable:c.enableDraggable.bind(this),disableDraggable:c.disableDraggable.bind(this),setDragPosition:c.setDragPosition.bind(this),getPointerPosition:c.getPointerPosition.bind(this),onDragStart:c.onDragStart.bind(this),onDragMove:c.onDragMove.bind(this),onDragEnd:c.onDragEnd.bind(this),isTouched:!1,timeout:null,dragTimeout:null}})},on:{init(){this.scrollbar.init(),this.scrollbar.updateSize(),this.scrollbar.setTranslate()},update(){this.scrollbar.updateSize()},resize(){this.scrollbar.updateSize()},observerUpdate(){this.scrollbar.updateSize()},setTranslate(){this.scrollbar.setTranslate()},setTransition(a){this.scrollbar.setTransition(a)},destroy(){this.scrollbar.destroy()}}};a.use(d)})(TF_Swiper);