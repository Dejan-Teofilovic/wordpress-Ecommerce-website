((p,y)=>{'use strict';const b=new Map;p.on('themify_overlay_search_init',e=>{let a,r=e.closest('.tf_search_form');if(!r){if(!(r=y.tfId('searchform')))return;r=r.closest('.tf_search_form')}const t=r.tfTag('form')[0],s=!!t.closest('.tf_search_overlay'),c=t.querySelector('input[name="s"]'),l=new URL(t.action).searchParams,o=l.get('term'),i=l.get('post_type'),f=y.createElement('div'),n=y.createElement('div');if(f.className='tf_search_result tf_w tf_box tf_hide',n.className='tf_loader tf_hide',s){r=y.createElement('div');const m=y.createElement('div'),u=y.createElement('a'),v=y.createElement('span'),g=()=>{r.classList.toggle('search-active',0<c.value.length)};e.tfOn('click',e=>{e.preventDefault(),g(),r.classList.add('tf_fd_in'),c.focus(),y.body.style.overflowY='hidden',y.body.classList.add('searchform-slidedown')}),u.tfOn('click',e=>{e.preventDefault(),g(),a&&a.abort(),a=null,r.classList.remove('tf_fd_in'),y.body.style.overflowY='',y.body.classList.remove('searchform-slidedown')}),r.className='tf_search_lightbox tf_hide tf_w tf_box tf_opacity tf_h tf_scrollbar',m.className='tf_searchform_inner tf_opacity',u.className='tf_close_search tf_close',v.className='screen-reader-text',u.appendChild(v),r.append(m,u),t.after(r),m.appendChild(t)}else f.className+=' tf_scrollbar',f.setAttribute('tabindex','-1');c.after(f),c.before(n);const _=e=>{let s=e.getAttribute('href').replace('#','');'all'===s&&(s='item');const a=e.closest('li'),r=f.tfClass('tf_search_item');for(let e=r.length-1;-1<e;--e)r[e].classList.remove('tf_fd_in'),r[e].classList.add('tf_fd_out');for(let e=a.parentNode.children,t=e.length-1;-1<t;--t)'LI'===e[t].tagName&&e[t].classList.remove('active');a.classList.add('active'),setTimeout(()=>{const t=f.tfClass('tf_view_button'),e=f.querySelector('#tf_result_link_'+s);for(let e=t.length-1;-1<e;--e)t[e].classList.add('tf_hide');e&&e.classList.remove('tf_hide');for(let t=r.length-1;-1<t;--t){let e=r[t].classList;e.contains('tf_search_'+s)?(e.remove('tf_hide','tf_fd_out'),e.add('tf_fd_in')):e.add('tf_hide')}},401)},d=(f.tfOn('click',e=>{const t=e.target;'A'===t.tagName&&t.closest('.tf_search_tab')&&(e.preventDefault(),_(t))}),{action:'themify_search_autocomplete'});i&&(d.post_type=i),o&&(d.term=o,d.tax=l.get('tax'));let h;c.tfOn('keyup',e=>{h&&clearTimeout(h),a&&a.abort();const s=e.currentTarget.value.trim(),t=()=>{f.innerHTML=b.get(s);{let e=f.querySelector('.tf_search_tab .active a');if(e=e&&e.getAttribute('href')){const t=f.querySelector('.tf_search_tab a[href="'+e+'"]');t&&_(t)}}};s?h=setTimeout(async()=>{if(r.classList.add('search-active'),b.has(s))t();else{r.classList.add('tf_search_loading'),a=new AbortController,d.s=s;try{const e=await p.fetch(d,'text',{signal:a.signal});e&&(b.set(s,e),t())}catch(e){'AbortError'!==e.name&&console.error('Uh oh, an error!',e)}r.classList.remove('tf_search_loading'),a=null}},100):(r.classList.remove('search-active'),f.innerHTML='')},{passive:!0}).autocomplete='off',t.classList.remove('tf_hide'),c.value.trim()&&p.triggerEvent(c,'keyup')})})(Themify,document);