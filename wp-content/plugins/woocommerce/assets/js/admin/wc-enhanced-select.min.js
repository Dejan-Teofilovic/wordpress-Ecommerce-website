jQuery(function(s){function i(){return{language:{errorLoading:function(){return wc_enhanced_select_params.i18n_searching},inputTooLong:function(e){e=e.input.length-e.maximum;return 1==e?wc_enhanced_select_params.i18n_input_too_long_1:wc_enhanced_select_params.i18n_input_too_long_n.replace("%qty%",e)},inputTooShort:function(e){e=e.minimum-e.input.length;return 1==e?wc_enhanced_select_params.i18n_input_too_short_1:wc_enhanced_select_params.i18n_input_too_short_n.replace("%qty%",e)},loadingMore:function(){return wc_enhanced_select_params.i18n_load_more},maximumSelected:function(e){return 1===e.maximum?wc_enhanced_select_params.i18n_selection_too_long_1:wc_enhanced_select_params.i18n_selection_too_long_n.replace("%qty%",e.maximum)},noResults:function(){return wc_enhanced_select_params.i18n_no_matches},searching:function(){return wc_enhanced_select_params.i18n_searching}}}}try{s(document.body).on("wc-enhanced-select-init",function(){s(":input.wc-enhanced-select, :input.chosen_select").filter(":not(.enhanced)").each(function(){var e=s.extend({minimumResultsForSearch:10,allowClear:!!s(this).data("allow_clear"),placeholder:s(this).data("placeholder")},i());s(this).selectWoo(e).addClass("enhanced")}),s(":input.wc-enhanced-select-nostd, :input.chosen_select_nostd").filter(":not(.enhanced)").each(function(){var e=s.extend({minimumResultsForSearch:10,allowClear:!0,placeholder:s(this).data("placeholder")},i());s(this).selectWoo(e).addClass("enhanced")}),s(":input.wc-product-search").filter(":not(.enhanced)").each(function(){var t,e,a,n,c={allowClear:!!s(this).data("allow_clear"),placeholder:s(this).data("placeholder"),minimumInputLength:s(this).data("minimum_input_length")?s(this).data("minimum_input_length"):"3",escapeMarkup:function(e){return e},ajax:{url:wc_enhanced_select_params.ajax_url,dataType:"json",delay:250,data:function(e){return{term:e.term,action:s(this).data("action")||"woocommerce_json_search_products_and_variations",security:wc_enhanced_select_params.search_products_nonce,exclude:s(this).data("exclude"),exclude_type:s(this).data("exclude_type"),include:s(this).data("include"),limit:s(this).data("limit"),display_stock:s(this).data("display_stock")}},processResults:function(e){var a=[];return e&&s.each(e,function(e,t){a.push({id:e,text:t})}),{results:a}},cache:!0}};t=this,e=c,e=s.extend(c,i()),s(t).selectWoo(e).addClass("enhanced"),s(t).data("sortable")?(a=s(t),(n=s(t).next(".select2-container").find("ul.select2-selection__rendered")).sortable({placeholder:"ui-state-highlight select2-selection__choice",forcePlaceholderSize:!0,items:"li:not(.select2-search__field)",tolerance:"pointer",stop:function(){s(n.find(".select2-selection__choice").get().reverse()).each(function(){var e=s(this).data("data").id,e=a.find('option[value="'+e+'"]')[0];a.prepend(e)})}})):s(t).prop("multiple")&&s(t).on("change",function(){var e=s(t).children();e.sort(function(e,t){e=e.text.toLowerCase(),t=t.text.toLowerCase();return t<e?1:e<t?-1:0}),s(t).html(e)})}),s(":input.wc-page-search").filter(":not(.enhanced)").each(function(){var e={allowClear:!!s(this).data("allow_clear"),placeholder:s(this).data("placeholder"),minimumInputLength:s(this).data("minimum_input_length")?s(this).data("minimum_input_length"):"3",escapeMarkup:function(e){return e},ajax:{url:wc_enhanced_select_params.ajax_url,dataType:"json",delay:250,data:function(e){return{term:e.term,action:s(this).data("action")||"woocommerce_json_search_pages",security:wc_enhanced_select_params.search_pages_nonce,exclude:s(this).data("exclude"),post_status:s(this).data("post_status"),limit:s(this).data("limit")}},processResults:function(e){var a=[];return e&&s.each(e,function(e,t){a.push({id:e,text:t})}),{results:a}},cache:!0}};s(this).selectWoo(e).addClass("enhanced")}),s(":input.wc-customer-search").filter(":not(.enhanced)").each(function(){var t,e,a={allowClear:!!s(this).data("allow_clear"),placeholder:s(this).data("placeholder"),minimumInputLength:s(this).data("minimum_input_length")?s(this).data("minimum_input_length"):"1",escapeMarkup:function(e){return e},ajax:{url:wc_enhanced_select_params.ajax_url,dataType:"json",delay:1e3,data:function(e){return{term:e.term,action:"woocommerce_json_search_customers",security:wc_enhanced_select_params.search_customers_nonce,exclude:s(this).data("exclude")}},processResults:function(e){var a=[];return e&&s.each(e,function(e,t){a.push({id:e,text:t})}),{results:a}},cache:!0}},a=s.extend(a,i());s(this).selectWoo(a).addClass("enhanced"),s(this).data("sortable")&&(t=s(this),(e=s(this).next(".select2-container").find("ul.select2-selection__rendered")).sortable({placeholder:"ui-state-highlight select2-selection__choice",forcePlaceholderSize:!0,items:"li:not(.select2-search__field)",tolerance:"pointer",stop:function(){s(e.find(".select2-selection__choice").get().reverse()).each(function(){var e=s(this).data("data").id,e=t.find('option[value="'+e+'"]')[0];t.prepend(e)})}}))}),s(":input.wc-category-search").filter(":not(.enhanced)").each(function(){var n=s(this).data("return_id")?"id":"slug",e=s.extend({allowClear:!!s(this).data("allow_clear"),placeholder:s(this).data("placeholder"),minimumInputLength:s(this).data("minimum_input_length")?s(this).data("minimum_input_length"):"3",escapeMarkup:function(e){return e},ajax:{url:wc_enhanced_select_params.ajax_url,dataType:"json",delay:250,data:function(e){return{term:e.term,action:"woocommerce_json_search_categories",security:wc_enhanced_select_params.search_categories_nonce}},processResults:function(e){var a=[];return e&&s.each(e,function(e,t){a.push({id:"id"==n?t.term_id:t.slug,text:t.formatted_name})}),{results:a}},cache:!0}},i());s(this).selectWoo(e).addClass("enhanced")}),s(":input.wc-taxonomy-term-search").filter(":not(.enhanced)").each(function(){var n=s(this).data("return_id")?"id":"slug",e=s.extend({allowClear:!!s(this).data("allow_clear"),placeholder:s(this).data("placeholder"),minimumInputLength:s(this).data("minimum_input_length")??"3",escapeMarkup:function(e){return e},ajax:{url:wc_enhanced_select_params.ajax_url,dataType:"json",delay:250,data:function(e){return{taxonomy:s(this).data("taxonomy"),limit:s(this).data("limit"),term:e.term,action:"woocommerce_json_search_taxonomy_terms",security:wc_enhanced_select_params.search_taxonomy_terms_nonce}},processResults:function(e){var a=[];return e&&s.each(e,function(e,t){a.push({id:"id"==n?t.term_id:t.slug,text:t.name})}),{results:a}},cache:!0}},i());s(this).selectWoo(e).addClass("enhanced")}),s(":input.wc-attribute-search").filter(":not(.enhanced)").each(function(){var t=this,e=s.extend({allowClear:!!s(this).data("allow_clear"),placeholder:s(this).data("placeholder"),minimumInputLength:s(this).data("minimum_input_length")??"3",escapeMarkup:function(e){return e},ajax:{url:wc_enhanced_select_params.ajax_url,dataType:"json",delay:250,data:function(e){return{term:e.term,action:"woocommerce_json_search_product_attributes",security:wc_enhanced_select_params.search_product_attributes_nonce}},processResults:function(e){var a=s(t).data("disabled-items")||[],n=[];return e&&s.each(e,function(e,t){n.push({id:t.slug,text:t.name,disabled:a.includes(t.slug)})}),{results:n}},cache:!0}},i());s(this).selectWoo(e).addClass("enhanced")})}).on("wc_backbone_modal_before_remove",function(){s(".wc-enhanced-select, :input.wc-product-search, :input.wc-customer-search").filter(".select2-hidden-accessible").selectWoo("close")}).trigger("wc-enhanced-select-init"),s("html").on("click",function(e){this===e.target&&s(".wc-enhanced-select, :input.wc-product-search, :input.wc-customer-search").filter(".select2-hidden-accessible").selectWoo("close")})}catch(e){window.console.log(e)}});