this.wc=this.wc||{},this.wc.blocks=this.wc.blocks||{},this.wc.blocks["rating-filter"]=function(e){function t(t){for(var c,a,s=t[0],l=t[1],u=t[2],b=0,d=[];b<s.length;b++)a=s[b],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&d.push(r[a][0]),r[a]=0;for(c in l)Object.prototype.hasOwnProperty.call(l,c)&&(e[c]=l[c]);for(i&&i(t);d.length;)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],c=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(c=!1)}c&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var c={},r={41:0,1:0},o=[];function a(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=c,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)a.d(n,c,function(t){return e[t]}.bind(null,c));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window.webpackWcBlocksJsonp=window.webpackWcBlocksJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var i=l;return o.push([423,0]),n()}({0:function(e,t){e.exports=window.wp.element},1:function(e,t){e.exports=window.wp.i18n},10:function(e,t){e.exports=window.wp.blocks},104:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var c=n(0);const r=Object(c.createContext)({}),o=()=>{const{wrapper:e}=Object(c.useContext)(r);return t=>{e&&e.current&&(e.current.hidden=!t)}}},105:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var c=n(12);function r(e,t){const n=Object(c.useRef)();return Object(c.useEffect)(()=>{n.current===e||t&&!t(e,n.current)||(n.current=e)},[e,t]),n.current}},109:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var c=n(9),r=n(7),o=n(0),a=n(40),s=n(144);const l=e=>{const{namespace:t,resourceName:n,resourceValues:l=[],query:u={},shouldSelect:i=!0}=e;if(!t||!n)throw new Error("The options object must have valid values for the namespace and the resource properties.");const b=Object(o.useRef)({results:[],isLoading:!0}),d=Object(a.a)(u),f=Object(a.a)(l),p=Object(s.a)(),O=Object(r.useSelect)(e=>{if(!i)return null;const r=e(c.COLLECTIONS_STORE_KEY),o=[t,n,d,f],a=r.getCollectionError(...o);if(a){if(!(a instanceof Error))throw new Error("TypeError: `error` object is not an instance of Error constructor");p(a)}return{results:r.getCollection(...o),isLoading:!r.hasFinishedResolution("getCollection",o)}},[t,n,f,d,i]);return null!==O&&(b.current=O),b.current}},12:function(e,t){e.exports=window.React},128:function(e,t,n){"use strict";var c=n(0),r=n(1),o=n(4),a=n.n(o),s=n(28);n(172),t.a=e=>{let{className:t,label:
/* translators: Reset button text for filters. */
n=Object(r.__)("Reset","woocommerce"),onClick:o,screenReaderLabel:l=Object(r.__)("Reset filter","woocommerce")}=e;return Object(c.createElement)("button",{className:a()("wc-block-components-filter-reset-button",t),onClick:o},Object(c.createElement)(s.a,{label:n,screenReaderLabel:l}))}},129:function(e,t,n){"use strict";var c=n(0),r=n(1),o=n(4),a=n.n(o),s=n(28);n(173),t.a=e=>{let{className:t,isLoading:n,disabled:o,label:
/* translators: Submit button text for filters. */
l=Object(r.__)("Apply","woocommerce"),onClick:u,screenReaderLabel:i=Object(r.__)("Apply filter","woocommerce")}=e;return Object(c.createElement)("button",{type:"submit",className:a()("wp-block-button__link","wc-block-filter-submit-button","wc-block-components-filter-submit-button",{"is-loading":n},t),disabled:o,onClick:u},Object(c.createElement)(s.a,{label:l,screenReaderLabel:i}))}},13:function(e,t){e.exports=window.wp.primitives},130:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));const c=e=>"boolean"==typeof e},144:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var c=n(0);const r=()=>{const[,e]=Object(c.useState)();return Object(c.useCallback)(t=>{e(()=>{throw t})},[])}},158:function(e,t,n){"use strict";var c=n(0),r=n(1),o=n(4),a=n.n(o),s=n(18);n(201),t.a=e=>{let{className:t,onChange:n,options:o=[],checked:l=[],isLoading:u=!1,isDisabled:i=!1,limit:b=10}=e;const[d,f]=Object(c.useState)(!1),p=Object(c.useMemo)(()=>[...Array(5)].map((e,t)=>Object(c.createElement)("li",{key:t,style:{width:Math.floor(75*Math.random())+25+"%"}})),[]),O=Object(c.useMemo)(()=>{const e=o.length-b;return!d&&Object(c.createElement)("li",{key:"show-more",className:"show-more"},Object(c.createElement)("button",{onClick:()=>{f(!0)},"aria-expanded":!1,"aria-label":Object(r.sprintf)(
/* translators: %s is referring the remaining count of options */
Object(r._n)("Show %s more option","Show %s more options",e,"woocommerce"),e)},Object(r.sprintf)(
/* translators: %s number of options to reveal. */
Object(r._n)("Show %s more","Show %s more",e,"woocommerce"),e)))},[o,b,d]),j=Object(c.useMemo)(()=>d&&Object(c.createElement)("li",{key:"show-less",className:"show-less"},Object(c.createElement)("button",{onClick:()=>{f(!1)},"aria-expanded":!0,"aria-label":Object(r.__)("Show less options","woocommerce")},Object(r.__)("Show less","woocommerce"))),[d]),w=Object(c.useMemo)(()=>{const e=o.length>b+5;return Object(c.createElement)(c.Fragment,null,o.map((t,r)=>Object(c.createElement)(c.Fragment,{key:t.value},Object(c.createElement)("li",e&&!d&&r>=b&&{hidden:!0},Object(c.createElement)(s.CheckboxControl,{id:t.value,className:"wc-block-checkbox-list__checkbox",label:t.label,checked:l.includes(t.value),onChange:()=>{n(t.value)}})),e&&r===b-1&&O)),e&&j)},[o,n,l,d,b,j,O,i]),g=a()("wc-block-checkbox-list","wc-block-components-checkbox-list",{"is-loading":u},t);return Object(c.createElement)("ul",{className:g},u?p:w)}},16:function(e,t){e.exports=window.wp.url},172:function(e,t){},173:function(e,t){},18:function(e,t){e.exports=window.wc.blocksCheckout},2:function(e,t){e.exports=window.wc.wcSettings},201:function(e,t){},243:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return i}));var c=n(16),r=n(2),o=n(130);const a=Object(r.getSettingWithCoercion)("is_rendering_php_template",!1,o.a),s="query_type_",l="filter_";function u(e){return window?Object(c.getQueryArg)(window.location.href,e):null}function i(e){a?window.location.href=e:window.history.replaceState({},"",e)}},25:function(e,t){e.exports=window.wp.isShallowEqual},28:function(e,t,n){"use strict";var c=n(0),r=n(4),o=n.n(r);t.a=e=>{let t,{label:n,screenReaderLabel:r,wrapperElement:a,wrapperProps:s={}}=e;const l=null!=n,u=null!=r;return!l&&u?(t=a||"span",s={...s,className:o()(s.className,"screen-reader-text")},Object(c.createElement)(t,s,r)):(t=a||c.Fragment,l&&u&&n!==r?Object(c.createElement)(t,s,Object(c.createElement)("span",{"aria-hidden":"true"},n),Object(c.createElement)("span",{className:"screen-reader-text"},r)):Object(c.createElement)(t,s,n))}},281:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var c=n(0),r=n(261),o=n(8),a=n(40),s=n(35),l=n(52),u=n(109),i=n(46);const b=e=>{let{queryAttribute:t,queryPrices:n,queryStock:b,queryRating:d,queryState:f,productIds:p}=e,O=Object(i.a)();O+="-collection-data";const[j]=Object(l.a)(O),[w,g]=Object(l.b)("calculate_attribute_counts",[],O),[m,h]=Object(l.b)("calculate_price_range",null,O),[_,k]=Object(l.b)("calculate_stock_status_counts",null,O),[y,E]=Object(l.b)("calculate_rating_counts",null,O),v=Object(a.a)(t||{}),C=Object(a.a)(n),S=Object(a.a)(b),x=Object(a.a)(d);Object(c.useEffect)(()=>{"object"==typeof v&&Object.keys(v).length&&(w.find(e=>Object(s.b)(v,"taxonomy")&&e.taxonomy===v.taxonomy)||g([...w,v]))},[v,w,g]),Object(c.useEffect)(()=>{m!==C&&void 0!==C&&h(C)},[C,h,m]),Object(c.useEffect)(()=>{_!==S&&void 0!==S&&k(S)},[S,k,_]),Object(c.useEffect)(()=>{y!==x&&void 0!==x&&E(x)},[x,E,y]);const[N,R]=Object(c.useState)(!1),[P]=Object(r.a)(N,200);N||R(!0);const T=Object(c.useMemo)(()=>(e=>{const t=e;return Array.isArray(e.calculate_attribute_counts)&&(t.calculate_attribute_counts=Object(o.sortBy)(e.calculate_attribute_counts.map(e=>{let{taxonomy:t,queryType:n}=e;return{taxonomy:t,query_type:n}}),["taxonomy","query_type"])),t})(j),[j]);return Object(u.a)({namespace:"/wc/store/v1",resourceName:"products/collection-data",query:{...f,page:void 0,per_page:void 0,orderby:void 0,order:void 0,...!Object(o.isEmpty)(p)&&{include:p},...T},shouldSelect:P})}},3:function(e,t){e.exports=window.wp.components},312:function(e){e.exports=JSON.parse('{"name":"woocommerce/rating-filter","version":"1.0.0","title":"Filter by Rating Controls","description":"Enable customers to filter the product grid by rating.","category":"woocommerce","keywords":["WooCommerce"],"supports":{"html":false,"multiple":false,"color":{"__experimentalDefaultControls":{"text":true}},"inserter":false,"lock":false},"example":{"attributes":{"isPreview":true}},"attributes":{"className":{"type":"string","default":""},"showCounts":{"type":"boolean","default":true},"showFilterButton":{"type":"boolean","default":false},"isPreview":{"type":"boolean","default":false}},"textdomain":"woocommerce","apiVersion":2,"$schema":"https://schemas.wp.org/trunk/block.json"}')},35:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return r}));const c=e=>!(e=>null===e)(e)&&e instanceof Object&&e.constructor===Object;function r(e,t){return c(e)&&t in e}},40:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var c=n(0),r=n(25),o=n.n(r);function a(e){const t=Object(c.useRef)(e);return o()(e,t.current)||(t.current=e),t.current}},423:function(e,t,n){e.exports=n(494)},424:function(e,t){},425:function(e,t){},44:function(e,t){e.exports=window.wp.a11y},46:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var c=n(0);const r=Object(c.createContext)("page"),o=()=>Object(c.useContext)(r);r.Provider},494:function(e,t,n){"use strict";n.r(t);var c=n(6),r=n.n(c),o=n(0),a=n(10),s=n(120),l=n(533),u=n(4),i=n.n(u),b=n(5),d=n(1),f=n(3),p=n(44);n(425);var O=e=>{let{className:t,key:n,rating:c,ratedProductsCount:r}=e;const a=i()("wc-block-components-product-rating",t),s={width:c/5*100+"%"},l=Object(d.sprintf)(
/* translators: %f is referring to the average rating value */
Object(d.__)("Rated %f out of 5","woocommerce"),c),u={__html:Object(d.sprintf)(
/* translators: %f is referring to the rating value */
Object(d.__)("Rated %f out of 5","woocommerce"),Object(d.sprintf)('<strong class="rating">%f</strong>',c))};return Object(o.createElement)("div",{className:a,key:n},Object(o.createElement)("div",{className:"wc-block-components-product-rating__stars",role:"img","aria-label":l},Object(o.createElement)("span",{style:s,dangerouslySetInnerHTML:u})),null!==r?Object(o.createElement)("span",{className:"wc-block-components-product-rating-count"},"(",r,")"):null)},j=n(40),w=n(105),g=n(52),m=n(281),h=n(2),_=n(130),k=n(35),y=n(25),E=n.n(y),v=n(158),C=n(129),S=n(128),x=n(16),N=n(243);const R=[{label:Object(o.createElement)(O,{className:"",key:5,rating:5,ratedProductsCount:5}),value:"5"},{label:Object(o.createElement)(O,{className:"",key:4,rating:4,ratedProductsCount:4}),value:"4"},{label:Object(o.createElement)(O,{className:"",key:3,rating:3,ratedProductsCount:3}),value:"3"},{label:Object(o.createElement)(O,{className:"",key:2,rating:2,ratedProductsCount:2}),value:"2"},{label:Object(o.createElement)(O,{className:"",key:1,rating:1,ratedProductsCount:1}),value:"1"}];n(424);var P=n(98),T=n(104),A=e=>{let{attributes:t,isEditor:n=!1}=e;const c=Object(T.a)(),r=Object(h.getSettingWithCoercion)("is_rendering_php_template",!1,_.a),[a,s]=Object(o.useState)(!1),[l]=Object(g.a)(),{results:u,isLoading:b}=Object(m.a)({queryRating:!0,queryState:l}),[f,y]=Object(o.useState)(t.isPreview?R:[]),A=!t.isPreview&&b&&0===f.length,F=!t.isPreview&&b,L=Object(o.useMemo)(()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"filter_rating";const t=Object(N.d)(e);if(!t)return[];const n=Object(P.a)(t)?t.split(","):t;return n}("rating_filter"),[]),[B,M]=Object(o.useState)(L),[q,Q]=Object(g.b)("rating"),[Y,D]=Object(g.b)("rating",L),K=Object(o.useCallback)(e=>{n||(e&&!r&&D(e),(e=>{if(!window)return;if(0===e.length){const e=Object(x.removeQueryArgs)(window.location.href,"rating_filter");return void(e!==window.location.href&&Object(N.c)(e))}const t=Object(x.addQueryArgs)(window.location.href,{rating_filter:e.join(",")});t!==window.location.href&&Object(N.c)(t)})(e))},[n,D,r]);Object(o.useEffect)(()=>{t.showFilterButton||K(B)},[t.showFilterButton,B,K]);const V=Object(o.useMemo)(()=>Y,[Y]),W=Object(j.a)(V),I=Object(w.a)(W);Object(o.useEffect)(()=>{E()(I,W)||E()(B,W)||M(W)},[B,W,I]),Object(o.useEffect)(()=>{a||(Q(L),s(!0))},[Q,a,s,L]),Object(o.useEffect)(()=>{if(b||t.isPreview)return;const e=(!b&&Object(k.b)(u,"rating_counts")&&Array.isArray(u.rating_counts)?[...u.rating_counts].reverse():[]).filter(e=>Object(k.a)(e)&&Object.keys(e).length>0).map(e=>{var n,c;return{label:Object(o.createElement)(O,{className:Array.from(q).includes(null==e||null===(n=e.rating)||void 0===n?void 0:n.toString())?"is-active":"",key:null==e?void 0:e.rating,rating:null==e?void 0:e.rating,ratedProductsCount:t.showCounts?null==e?void 0:e.count:null}),value:null==e||null===(c=e.rating)||void 0===c?void 0:c.toString()}});y(e)},[t.showCounts,t.isPreview,u,b,q]);const U=Object(o.useCallback)(e=>{const t=B.includes(e),n=B.filter(t=>t!==e);t?Object(p.speak)(Object(d.sprintf)(
/* translators: %s is referring to the average rating value */
Object(d.__)("Rated %s out of 5 filter removed.","woocommerce"),e)):(n.push(e),n.sort(),Object(p.speak)(Object(d.sprintf)(
/* translators: %s is referring to the average rating value */
Object(d.__)("Rated %s out of 5 filter added.","woocommerce"),e))),M(n)},[B]);return(b||0!==f.length)&&Object(h.getSettingWithCoercion)("has_filterable_products",!1,_.a)?(c(!0),Object(o.createElement)(o.Fragment,null,Object(o.createElement)("div",{className:i()("wc-block-rating-filter",{"is-loading":A})},Object(o.createElement)(v.a,{className:"wc-block-rating-filter-list",options:f,checked:B,onChange:e=>{U(e.toString())},isLoading:A,isDisabled:F})),Object(o.createElement)("div",{className:"wc-block-rating-filter__actions"},B.length>0&&!A&&Object(o.createElement)(S.a,{onClick:()=>{M([]),Q([]),K([])},screenReaderLabel:Object(d.__)("Reset rating filter","woocommerce")}),t.showFilterButton&&Object(o.createElement)(C.a,{className:"wc-block-rating-filter__button",isLoading:A,disabled:A||F,onClick:()=>K(B)})))):(c(!1),null)},F=Object(f.withSpokenMessages)(e=>{let{attributes:t,setAttributes:n}=e;const{className:c,showCounts:r,showFilterButton:a}=t,s=Object(b.useBlockProps)({className:i()("wc-block-rating-filter",c)});return Object(o.createElement)(o.Fragment,null,Object(o.createElement)(b.InspectorControls,{key:"inspector"},Object(o.createElement)(f.PanelBody,{title:Object(d.__)("Content","woocommerce")},Object(o.createElement)(f.ToggleControl,{label:Object(d.__)("Display product count","woocommerce"),checked:r,onChange:()=>n({showCounts:!r})})),Object(o.createElement)(f.PanelBody,{title:Object(d.__)("Settings","woocommerce")},Object(o.createElement)(f.ToggleControl,{label:Object(d.__)("Show 'Apply filters' button","woocommerce"),help:a?Object(d.__)("Products will only update when the button is clicked.","woocommerce"):Object(d.__)("Products will update as soon as attributes are selected.","woocommerce"),checked:a,onChange:e=>n({showFilterButton:e})}))),Object(o.createElement)("div",s,Object(o.createElement)(f.Disabled,null,Object(o.createElement)(A,{attributes:t,isEditor:!0}))))}),L=n(312);Object(a.registerBlockType)(L,{icon:{src:Object(o.createElement)(s.a,{icon:l.a,className:"wc-block-editor-components-block-icon"})},attributes:{...L.attributes},edit:F,save(e){let{attributes:t}=e;const{className:n,showCounts:c}=t,a={"data-show-counts":c};return Object(o.createElement)("div",r()({},b.useBlockProps.save({className:i()("is-loading",n)}),a),Object(o.createElement)("span",{"aria-hidden":!0,className:"wc-block-product-rating-filter__placeholder"}))}})},5:function(e,t){e.exports=window.wp.blockEditor},52:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f}));var c=n(9),r=n(7),o=n(0),a=n(25),s=n.n(a),l=n(40),u=n(105),i=n(46);const b=e=>{const t=Object(i.a)();e=e||t;const n=Object(r.useSelect)(t=>t(c.QUERY_STATE_STORE_KEY).getValueForQueryContext(e,void 0),[e]),{setValueForQueryContext:a}=Object(r.useDispatch)(c.QUERY_STATE_STORE_KEY);return[n,Object(o.useCallback)(t=>{a(e,t)},[e,a])]},d=(e,t,n)=>{const a=Object(i.a)();n=n||a;const s=Object(r.useSelect)(r=>r(c.QUERY_STATE_STORE_KEY).getValueForQueryKey(n,e,t),[n,e]),{setQueryValue:l}=Object(r.useDispatch)(c.QUERY_STATE_STORE_KEY);return[s,Object(o.useCallback)(t=>{l(n,e,t)},[n,e,l])]},f=(e,t)=>{const n=Object(i.a)();t=t||n;const[c,r]=b(t),a=Object(l.a)(c),d=Object(l.a)(e),f=Object(u.a)(d),p=Object(o.useRef)(!1);return Object(o.useEffect)(()=>{s()(f,d)||(r(Object.assign({},a,d)),p.current=!0)},[a,d,f,r]),p.current?[c,r]:[e,r]}},7:function(e,t){e.exports=window.wp.data},8:function(e,t){e.exports=window.lodash},9:function(e,t){e.exports=window.wc.wcBlocksData},98:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));const c=e=>"string"==typeof e}});