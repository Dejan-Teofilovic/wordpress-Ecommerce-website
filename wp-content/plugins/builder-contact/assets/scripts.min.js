(($,n)=>{'use strict';n.on('builder_load_module_partial',(e,t)=>{if(!0!==t||e.classList.contains('module-contact')){const a=n.selectWithParent('builder-contact',e);for(let e=a.length-1;-1<e;--e)n.requestIdleCallback(()=>{(async c=>{const i=async(e,t)=>{const a=new FormData(e[0]);a.set('action','builder_contact_send'),a.set('post_id',e.data('post-id')),a.set('orig_id',e.data('orig-id')),a.set('element_id',e.data('element-id')),t&&a.set('g-recaptcha-response',t);try{const s=await n.fetch(a,'json'),c=s.data,i=e.find('.contact-message');s.success?(i.html('<p class="ui light-green contact-success">'+c.msg+'</p>').fadeIn(),n.trigger('builder_contact_message_sent',[e,c.msg]),''!==c.redirect_url&&(c.nw?setTimeout(()=>{window.open(c.redirect_url,'_blank')},2e3):window.location=c.redirect_url),e[0].reset()):(i.html('<p class="ui red contact-error">'+c.error+'</p>').fadeIn(),n.trigger('builder_contact_message_failed',[e,c.error]))}catch(e){}$('html').stop().animate({scrollTop:e.offset().top-100},500,'swing'),'object'==typeof grecaptcha&&'v2'===e.find('.themify_captcha_field').data('ver')&&grecaptcha.reset(),e.removeClass('sending')},t=c.tfClass('themify_captcha_field')[0];if(t&&'undefined'==typeof grecaptcha){const a=t.dataset.sitekey;if(a){let e='https://www.google.com/recaptcha/api.js';'v3'===t.dataset.ver&&(e+='?render='+a),await n.loadJs(e,null,!1)}}n.is_builder_active||c.tfOn('submit',function(e){e.preventDefault();const t=$(this),a=this.classList,s=c.tfClass('themify_captcha_field')[0];if(a.contains('sending'))return!1;a.add('sending'),t.find('.contact-message').fadeOut(),s&&'v3'===s.dataset.ver&&'undefined'!=typeof grecaptcha?grecaptcha.ready(async()=>{const e=await grecaptcha.execute(s.dataset.sitekey,{action:'captcha'});i(t,e)}):i(t)})})(a[e])},300)}})})(jQuery,Themify);