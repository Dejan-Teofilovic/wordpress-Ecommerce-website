!function(){"use strict";var e={n:function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,{a:t}),t},d:function(n,t){for(var o in t)e.o(t,o)&&!e.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:t[o]})},o:function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}},n=window.wp.i18n,t=window.wp.apiFetch,o=e.n(t),r=window.wp.domReady;function i(e){return`${e}-last-count`}function a(e){const n=document.getElementById(e);if(!n||n.querySelector(".amp-count-loading"))return;const t=sessionStorage.getItem(i(e));if(!t||"0"!==t){const e=document.createElement("span");e.classList.add("amp-count-loading"),n.append(e),n.classList.add("awaiting-mod")}}function s(e,n){const t=document.getElementById(e);if(t)if(isNaN(n)||0===n)t.parentNode.removeChild(t),sessionStorage.setItem(i(e),"0");else{const o=n.toLocaleString();t.textContent=o,t.classList.add("awaiting-mod"),sessionStorage.setItem(i(e),o)}}function c(e){const{validated_urls:n,errors:t}=e;s("amp-new-error-index-count",t),s("amp-new-validation-url-count",n)}function u(){o()({path:"/amp/v1/unreviewed-validation-counts"}).then((e=>{c(e)})).catch((e=>{c({validated_urls:0,errors:0});const t=(null==e?void 0:e.message)||(0,n.__)("An unknown error occurred while retrieving the validation counts","amp");console.error(`[AMP Plugin] ${t}`)}))}e.n(r)()((()=>{const e=document.getElementById("toplevel_page_amp-options");e&&(a("amp-new-error-index-count"),a("amp-new-validation-url-count"),e.classList.contains("wp-menu-open")?u():function(e){if(!("IntersectionObserver"in window))return void c({validated_urls:0,errors:0});const n=e.querySelector("ul"),t=new IntersectionObserver((e=>{let[o]=e;o&&o.isIntersecting&&(t.unobserve(n),u())}),{root:e});t.observe(n)}(e))}))}();