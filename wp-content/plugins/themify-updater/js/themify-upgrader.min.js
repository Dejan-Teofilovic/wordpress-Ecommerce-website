var ThemifyUpdater;!function($,l,p){'use strict';(ThemifyUpdater={showAlert:function(){$(".themify_updater_alert").addClass("busy").fadeIn(800)},hideAlert:function(e){e='error'===e?'error':'done',$(".themify_updater_alert").removeClass("busy").addClass(e).delay(800).fadeOut(800,function(){$(this).removeClass(e)})},events:function(){$('#themify-updater-search .clear-search').on('click',function(){$(this).prev().val(''),$(p).trigger('themify_update_promo')}),$('#themify-updater-search .promo-search').on('input',function(e){var t=$(this),a=t.val().toLowerCase(),t=t.siblings('.clear-search');''!=a&&0<$('.theme-list li').length&&$('.theme-list li').filter(function(){var e=$(this);1==e.is(":visible")&&-1<e.find('.theme-title h3').text().toLowerCase().indexOf(a)?e.show():e.hide().parent().append(e)}),''==a?t.click().hide():t.show()}),ThemifyUpdater.updateThemeBtn(),$('#wpbody').on('click','a.themify-updater',function(e){var t,a,i;e.preventDefault(),$(this).hasClass('themify-updater-stop')?$(this).closest('.notifications').after('<div id="themifyUpdateRrror" class="notice notice-error is-dismissible">'+themify_upgrader_license.error_message+'</div>'):confirm(themify_upgrader.check_backup)&&(e=$(this),t=e.closest('.notifications'),a=e.data('update_type'),i={slug:e.data('plugin'),action:a.substring(0,a.length-1),_ajax_nonce:e.data('nonce'),_fs_nonce:'',username:'',password:'',connection_type:'',public_key:'',private_key:''},'update-plugins'===a&&(i.plugin=e.data('base')),$.ajax({url:ajaxurl,type:'POST',data:i,beforeSend:function(){ThemifyUpdater.showAlert()},success:function(e){(e='string'==typeof e?JSON.parse(e):e).success?(ThemifyUpdater.hideAlert(),setTimeout(function(){location.reload()},1500)):(ThemifyUpdater.hideAlert('error'),0<t.siblings("#themifyUpdateRrror").length&&t.siblings("#themifyUpdateRrror").remove(),t.after('<div id="themifyUpdateRrror" class="notice notice-error is-dismissible">'+e.data.errorMessage+'</div>'))},error:function(){ThemifyUpdater.hideAlert('error')}}))}),$('.themify_updater_changelogs').on('click',function(e){e.preventDefault();e=$(this).data('changelog');$('.themify-updater-promt-box .show-error').hide(),$('.themify_updater_alert').addClass('busy').fadeIn(300),$('.themify_updater_promt_overlay,.themify-updater-promt-box').fadeIn(300),$('<iframe src="'+e+'" />').on('load',function(){$('.themify_updater_alert').removeClass('busy').fadeOut(300)}).prependTo('.themify-updater-promt-box'),$('.themify-updater-promt-box').addClass('show-changelog'),$('.themify_updater_promt_overlay').one('click',function(e){$(this).fadeOut(300),$('.themify-updater-promt-box').fadeOut(300).find('iframe').remove()})}),$('.notifications .notification-group span:first-child').on('click',function(e){e.preventDefault(),$(this).siblings().slideToggle()}),$(p).on('themify_updater_init_batch',function(){0<p.getElementsByClassName('themify-updater-batch-wrap').length&&ThemifyUpdater.initBatchInstaller()})},initBatchInstaller:function(){const e=p.querySelector('.themify-updater-batch-install'),t=e.querySelector('.themify-updater-batch-install .batch-install-enable'),a=(e.style.display='block',t.addEventListener('change',function(){p.body.classList.toggle('themify-updater-batch-mode')}),e.querySelector('.themify-updater-batch-install-btn').addEventListener('click',function(){const i=p.querySelectorAll('.themify-updater-batch-checkbox:checked'),t=i.length;if(0===t)alert('Please select at least on item to install.');else{let e={};for(let a=t-1;-1<a;a--){let t=this.dataset.update+"?action="+i[a].dataset.action+"-"+this.dataset.type+"&"+this.dataset.type+"="+i[a].dataset.slug+"&_wpnonce="+i[a].dataset.nonce;if('upgrade'===i[a].dataset.action){let e=i[a].parentNode.nextElementSibling;const r=e&&e.value?e.value:'';t+="&themify_theme_downgrade=1",e.selectedOptions[0].hasAttribute('data-latest')||(t+='&version='+r),''!==r&&(i[a].dataset.title=i[a].dataset.title+' '+r)}e[i[a].dataset.title]=t}ThemifyUpdater.bulkInstall(e,ThemifyUpdater.initModal())}}),p.querySelector('.batch-install-all input')),i=p.querySelectorAll('.theme-post:not([style^=display]) .themify-updater-batch-checkbox'),r=function(){this.closest('.themify-updater-batch-wrap').classList.toggle('batch-checked')};for(let e=i.length-1;-1<e;e--)i[e].addEventListener('change',r);a.addEventListener('change',function(){const t=this.checked,a=p.querySelectorAll('.theme-post:not([style^=display]) .themify-updater-batch-checkbox');for(let e=a.length-1;-1<e;e--){a[e].checked=t;const i=a[e].closest('.themify-updater-batch-wrap').classList;t?i.add('batch-checked'):i.remove('batch-checked')}const e=p.querySelector('.plugin-category .active');e&&(t?e.dataset.checked=t:e.dataset.checked&&delete e.dataset.checked)})},bulkInstall:function(d,l){const o=Object.keys(d),c=p.createElement('li'),h=p.createElement('span');c.appendChild(p.createTextNode(themify_upgrader.installing)),h.className='themify-updater-batch-name',h.innerText=o[0]+' ',c.appendChild(h),c.className='themify-updater-batch-installing',l.appendChild(c),fetch(d[o[0]],{headers:new Headers({'X-Requested-With':'XMLHttpRequest'})}).then(e=>e.text()).then(function(e){const t=(new DOMParser).parseFromString(e,'text/html'),a=t.querySelector('.wrap a[href*=activate]');if(c.innerHTML='',c.appendChild(h),!l.dataset.activate&&a){const i=p.createElement('a');i.href=a.href,i.className='themify-updater-batch-activate',i.innerText=themify_upgrader.activate_lnk,c.appendChild(i)}else c.appendChild(p.createTextNode(themify_upgrader.installed));if(c.classList.remove('themify-updater-batch-installing'),c.classList.add('themify-updater-batch-installed'),delete d[o[0]],1<o.length)ThemifyUpdater.bulkInstall(d,l);else{l.parentNode.querySelector('.themify-updater-modal-loading').remove();const r=l.nextElementSibling;if(l.dataset.activate&&a){const s=p.createElement('a');s.className='themify-updater-modal-activate themify-updater-button',s.href=a.href,s.innerText=themify_upgrader.activate,r.appendChild(s)}const n=p.createElement('div');n.className='themify-updater-modal-done themify-updater-button',n.setAttribute('onclick','location.reload()'),n.innerText=themify_upgrader.done,r.appendChild(n)}}).catch(function(e){console.warn('Update error.',e)})},initModal:function(e){p.getElementById('wpbody-content').style.pointerEvents='none',p.body.style.overflow='hidden';const t=p.createElement('div'),a=(t.className='themify-updater-modal tf_scrollbar',p.createElement('ul')),i=(a.className='themify-updater-bulk-list tf_scrollbar',!0===e&&(a.dataset.activate=!0),t.appendChild(a),p.createElement('div')),r=(i.className='themify-updater-modal-loading',t.appendChild(i),p.createElement('div'));return r.className='themify-updater-modal-btns',t.appendChild(r),p.body.appendChild(t),t.addEventListener('click',function(e){const t=e.target;'A'===t.tagName&&t.classList.contains('themify-updater-batch-activate')&&(e.preventDefault(),e.stopPropagation(),t.dataset.loading||(ThemifyUpdater.showAlert(),fetch(t.href,{headers:new Headers({'X-Requested-With':'XMLHttpRequest'})}).then(e=>e.text()).then(function(e){ThemifyUpdater.hideAlert(),delete t.dataset.loading,t.parentNode.replaceChild(p.createTextNode(themify_upgrader.activated),t)}).catch(function(e){ThemifyUpdater.hideAlert('error'),delete t.dataset.loading})))}),a},updateThemeBtn:function(){$('.upgrade-theme-button').on('click',function(e){e.preventDefault(),e.stopPropagation();const t=this,a=p.getElementById('themeversiontoreinstall');if(!t.dataset.loading){var i,r=JSON.parse(atob($(e.target).data('install'))),e=a.value,n=r.url+'?',s=e?parseInt(e[0].toString().trim()):null;if(null!==s&&s<7&&'undefined'!=typeof themify_vars){const d=themify_vars.theme_v?parseInt(themify_vars.theme_v[0].toString().trim()):0;if(7<=d&&!confirm(themify_upgrader.v7_message))return}for(i in delete r.url,r)n+=i+'='+r[i]+'&';n+='themify-theme=1',0!==a.selectedIndex&&(n+='&version='+e),ThemifyUpdater.showAlert(),fetch(n,{headers:new Headers({'X-Requested-With':'XMLHttpRequest'})}).then(e=>e.text()).then(function(e){ThemifyUpdater.hideAlert(),delete t.dataset.loading,l.location.reload()}).catch(function(e){ThemifyUpdater.hideAlert('error'),delete t.dataset.loading})}})}}).events()}(jQuery,window,document);