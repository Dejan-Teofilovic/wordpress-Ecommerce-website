/*! For license information please see link-format-block.js.LICENSE.txt */
(()=>{var e={184:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)&&n.length){var l=i.apply(null,n);l&&e.push(l)}else if("object"===o)for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.element,t=window.wp.i18n,r=window.wp.components,i=window.wp.richText,o=window.wp.url,l=window.wp.blockEditor,s=window.wp.htmlEntities,a=window.wp.primitives,c=(0,e.createElement)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(a.Path,{d:"M15.6 7.3h-.7l1.6-3.5-.9-.4-3.9 8.5H9v1.5h2l-1.3 2.8H8.4c-2 0-3.7-1.7-3.7-3.7s1.7-3.7 3.7-3.7H10V7.3H8.4c-2.9 0-5.2 2.3-5.2 5.2 0 2.9 2.3 5.2 5.2 5.2H9l-1.4 3.2.9.4 5.7-12.5h1.4c2 0 3.7 1.7 3.7 3.7s-1.7 3.7-3.7 3.7H14v1.5h1.6c2.9 0 5.2-2.3 5.2-5.2 0-2.9-2.4-5.2-5.2-5.2z"})),u=(0,e.createElement)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(a.Path,{d:"M15.6 7.2H14v1.5h1.6c2 0 3.7 1.7 3.7 3.7s-1.7 3.7-3.7 3.7H14v1.5h1.6c2.8 0 5.2-2.3 5.2-5.2 0-2.9-2.3-5.2-5.2-5.2zM4.7 12.4c0-2 1.7-3.7 3.7-3.7H10V7.2H8.4c-2.9 0-5.2 2.3-5.2 5.2 0 2.9 2.3 5.2 5.2 5.2H10v-1.5H8.4c-2 0-3.7-1.7-3.7-3.7zm4.6.9h5.3v-1.5H9.3v1.5z"})),d=window.lodash,p=(e,t,n)=>{let r,i=0;const o={dev:-6,alpha:-5,a:-5,beta:-4,b:-4,RC:-3,rc:-3,"#":-2,p:1,pl:1},l=function(e){return(e=(e=(""+e).replace(/[_\-+]/g,".")).replace(/([^.\d]+)/g,".$1.").replace(/\.{2,}/g,".")).length?e.split("."):[-8]},s=function(e){return e?isNaN(e)?o[e]||-7:parseInt(e,10):0};e=l(e),t=l(t);const a=Math.max(e.length,t.length);for(r=0;r<a;r++)if(e[r]!==t[r]){if(e[r]=s(e[r]),t[r]=s(t[r]),e[r]<t[r]){i=-1;break}if(e[r]>t[r]){i=1;break}}if(!n)return i;switch(n){case">":case"gt":return 0<i;case">=":case"ge":return 0<=i;case"<=":case"le":return 0>=i;case"===":case"=":case"eq":return 0===i;case"<>":case"!==":case"ne":return 0!==i;case"":case"<":case"lt":return 0>i;default:return null}};function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}var h=n(184),g=n.n(h);const k=window.wp.compose,f=window.wp.data,w=window.wp.dom,v=window.wp.hooks,_=[{id:"opensInNewTab",title:(0,t.__)("Open in new tab"),type:"ToggleControl"},{id:"nofollow",title:(0,t.__)('Add "nofollow" to link',"all-in-one-seo-pack"),type:"ToggleControl"},{id:"sponsored",title:(0,t.__)('Add "sponsored" to link',"all-in-one-seo-pack"),type:"ToggleControl"},{id:"ugc",title:(0,t.__)('Add "ugc" to link',"all-in-one-seo-pack"),type:"ToggleControl"},{id:"title",title:(0,t.__)("Add title attribute to link","all-in-one-seo-pack"),type:"TextControl"}];class b extends e.Component{constructor(e){super(e),this.state={textValue:e.value.title}}componentDidUpdate(e,t){t.textValue===this.state.textValue&&e.value.title===this.props.value.title&&e.value.title!==t.textValue&&this.setState({textValue:e.value.title})}componentWillUnmount(){this.state.textValue&&this.state.textValue!==this.props.value.title&&this.props.onChange({...this.props.value,title:this.state.textValue})}render(){const{value:n,onChange:i}=this.props,o=_;if(!o||!o.length)return null;const l=e=>t=>{i({...n,[e.id]:t})},s=(e,t)=>{n.url?i({...n,[t.id]:e.target.value}):this.setState({textValue:e.target.value})},a=o.map((t=>"TextControl"===t.type?(0,e.createElement)(r.TextControl,{"data-aioseop":"true",className:"block-editor-link-control__setting aioseo-link-title",key:t.id,label:t.title,onChange:e=>{this.setState({textValue:e})},onBlur:e=>{s(e,t)},onKeyDown:e=>{13===e.keyCode&&(s(e,t),e.preventDefault(),e.stopPropagation())},value:this.state.textValue}):"ToggleControl"===t.type?(0,e.createElement)(r.ToggleControl,{className:"block-editor-link-control__setting",key:t.id,label:t.title,onChange:l(t),checked:!!n&&!!n[t.id]}):null));return(0,e.createElement)("fieldset",{className:"block-editor-link-control__settings"},(0,e.createElement)(r.VisuallyHidden,{as:"legend"},(0,t.__)("Currently selected link settings")),a)}}const y=b;function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const x=function(t){var n=t.icon,r=t.size,i=void 0===r?24:r,o=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(t,["icon","size"]);return(0,e.cloneElement)(n,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({width:i,height:i},o))},C=(0,e.createElement)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24"},(0,e.createElement)(a.Path,{d:"M9 0C4.03 0 0 4.03 0 9s4.03 9 9 9 9-4.03 9-9-4.03-9-9-9zM1.11 9.68h2.51c.04.91.167 1.814.38 2.7H1.84c-.403-.85-.65-1.764-.73-2.7zm8.57-5.4V1.19c.964.366 1.756 1.08 2.22 2 .205.347.386.708.54 1.08l-2.76.01zm3.22 1.35c.232.883.37 1.788.41 2.7H9.68v-2.7h3.22zM8.32 1.19v3.09H5.56c.154-.372.335-.733.54-1.08.462-.924 1.255-1.64 2.22-2.01zm0 4.44v2.7H4.7c.04-.912.178-1.817.41-2.7h3.21zm-4.7 2.69H1.11c.08-.936.327-1.85.73-2.7H4c-.213.886-.34 1.79-.38 2.7zM4.7 9.68h3.62v2.7H5.11c-.232-.883-.37-1.788-.41-2.7zm3.63 4v3.09c-.964-.366-1.756-1.08-2.22-2-.205-.347-.386-.708-.54-1.08l2.76-.01zm1.35 3.09v-3.04h2.76c-.154.372-.335.733-.54 1.08-.464.92-1.256 1.634-2.22 2v-.04zm0-4.44v-2.7h3.62c-.04.912-.178 1.817-.41 2.7H9.68zm4.71-2.7h2.51c-.08.936-.327 1.85-.73 2.7H14c.21-.87.337-1.757.38-2.65l.01-.05zm0-1.35c-.046-.894-.176-1.78-.39-2.65h2.16c.403.85.65 1.764.73 2.7l-2.5-.05zm1-4H13.6c-.324-.91-.793-1.76-1.39-2.52 1.244.56 2.325 1.426 3.14 2.52h.04zm-9.6-2.52c-.597.76-1.066 1.61-1.39 2.52H2.65c.815-1.094 1.896-1.96 3.14-2.52zm-3.15 12H4.4c.324.91.793 1.76 1.39 2.52-1.248-.567-2.33-1.445-3.14-2.55l-.01.03zm9.56 2.52c.597-.76 1.066-1.61 1.39-2.52h1.76c-.82 1.08-1.9 1.933-3.14 2.48l-.01.04z"})),N=n=>{let{itemProps:i,suggestion:l,isSelected:s=!1,onClick:a,isURL:c=!1,searchTerm:u=""}=n;return(0,e.createElement)(r.Button,m({},i,{onClick:a,className:g()("block-editor-link-control__search-item",{"is-selected":s,"is-url":c,"is-entity":!c})}),c&&(0,e.createElement)(x,{className:"block-editor-link-control__search-item-icon",icon:C}),(0,e.createElement)("span",{className:"block-editor-link-control__search-item-header"},(0,e.createElement)("span",{className:"block-editor-link-control__search-item-title"},(0,e.createElement)(r.TextHighlight,{text:l.title,highlight:u})),(0,e.createElement)("span",{"aria-hidden":!c,className:"block-editor-link-control__search-item-info"},!c&&((0,o.safeDecodeURI)(l.url)||""),c&&(0,t.__)("Press ENTER to add this link"))),l.type&&(0,e.createElement)("span",{className:"block-editor-link-control__search-item-type"},l.type))},L=(0,e.createElement)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24"},(0,e.createElement)(a.Path,{d:"M16 4h2v9H7v3l-5-4 5-4v3h9V4z"}));var P;const T=window.wp,O=(null===(P=T.blockEditor)||void 0===P?void 0:P.URLInput)||T.editor.URLInput,R=n=>{let{value:i,onChange:o,onSelect:l,renderSuggestions:s,fetchSuggestions:a,showInitialSuggestions:c,errorMessage:u}=n;const[d,p]=(0,e.useState)();return(0,e.createElement)("form",{onSubmit:function(e){e.preventDefault(),l(d||{url:i})}},(0,e.createElement)("div",{className:"block-editor-link-control__search-input-wrapper"},(0,e.createElement)(O,{className:"block-editor-link-control__search-input",value:i,onChange:(e,t)=>{o(e),p(t)},placeholder:(0,t.__)("Search or type url"),__experimentalRenderSuggestions:s,__experimentalFetchLinkSuggestions:a,__experimentalHandleURLSuggestions:!0,__experimentalShowInitialSuggestions:c}),(0,e.createElement)("div",{className:"block-editor-link-control__search-actions"},(0,e.createElement)(r.Button,{type:"submit",label:(0,t.__)("Submit"),icon:L,className:"block-editor-link-control__search-submit"}))),u&&(0,e.createElement)(r.Notice,{className:"block-editor-link-control__search-error",status:"error",isDismissible:!1},u))},H=n=>{let{searchTerm:i,onClick:o,itemProps:l,isSelected:s}=n;return i?(0,e.createElement)(r.Button,m({},l,{className:g()("block-editor-link-control__search-create block-editor-link-control__search-item",{"is-selected":s}),onClick:o}),(0,e.createElement)(r.Icon,{className:"block-editor-link-control__search-item-icon",icon:"insert"}),(0,e.createElement)("span",{className:"block-editor-link-control__search-item-header"},(0,e.createElement)("span",{className:"block-editor-link-control__search-item-title"},(0,e.createInterpolateElement)((0,t.sprintf)((0,t.__)("New page: <mark>%1$s</mark>"),i),{mark:(0,e.createElement)("mark",null)})))):null},{Slot:V,Fill:I}=(0,r.createSlotFill)("BlockEditorLinkControlViewer"),A="__CREATE__";function F(n){let{value:i,settings:l,selectedText:s,onChange:a=d.noop,showSuggestions:c=!0,showInitialSuggestions:u,forceIsEditingLink:p,createSuggestion:h}=n;const _=(0,e.useRef)(),b=(0,e.useRef)(),E=(0,e.useRef)(),S=(0,k.useInstanceId)(F),[x,C]=(0,e.useState)(i&&i.url||""),[L,P]=(0,e.useState)(void 0!==p?p:!i||!i.url),[T,O]=(0,e.useState)(!1),[I,z]=(0,e.useState)(null),j=(0,e.useRef)(!1),{fetchSearchSuggestions:M}=(0,f.useSelect)((e=>{const{getSettings:t}=e("core/block-editor");return{fetchSearchSuggestions:t().__experimentalFetchLinkSuggestions}}),[]),U=i&&(0,o.filterURLForDisplay)((0,o.safeDecodeURI)(i.url))||"";(0,e.useEffect)((()=>{void 0!==p&&p!==L&&P(p)}),[p]),(0,e.useEffect)((()=>{j.current&&E.current&&!E.current.contains(document.activeElement)&&(w.focus.focusable.find(E.current)[0]||E.current).focus(),j.current=!1}),[L]),(0,e.useEffect)((()=>()=>{_.current&&_.current.cancel(),b.current&&b.current.cancel()}),[]);const D=e=>{let t="URL";const n=(0,o.getProtocol)(e)||"";return n.includes("mailto")&&(t="mailto"),n.includes("tel")&&(t="tel"),(0,d.startsWith)(e,"#")&&(t="internal"),Promise.resolve([{id:e,title:e,url:"URL"===t?(0,o.prependHTTP)(e):e,type:t}])};function B(){j.current=!!E.current&&E.current.contains(document.activeElement),P(!1)}function W(e){const t=(0,d.startsWith)(e,"#");return(0,o.isURL)(e)||e&&e.includes("www.")||t}const $=(0,e.useCallback)(((e,t)=>c?W(e)?D(e):(async(e,t)=>{let n=await Promise.all([M(e,{...t.isInitialSuggestions?{perPage:3}:{}}),D(e)]);return n=e.includes(" ")||t.isInitialSuggestions?n[0]:n[0].concat(n[1]),W(e)?n:n.concat({title:e,url:e,type:A})})(e,t):Promise.resolve([])),[D,M]),G=async e=>{O(!0),z(null);try{b.current=(e=>{let t=!1;return{promise:new Promise(((n,r)=>{e.then((e=>t?r({isCanceled:!0}):n(e)),(e=>r(t?{isCanceled:!0}:e)))})),cancel(){t=!0}}})(Promise.resolve(h(e)));const t=await b.current.promise;O(!1),t?(a(t),B()):P(!0)}catch(e){if(e&&e.isCanceled)return;z(e.message||(0,t.__)("An unknown error occurred during creation. Please try again.")),O(!1),P(!0)}},q=(0,e.useMemo)((()=>({url:i&&i.url})),[i&&i.url]);return(0,e.createElement)("div",{tabIndex:-1,ref:E,className:"block-editor-link-control aioseo-link-format"},T&&(0,e.createElement)("div",{className:"block-editor-link-control__loading"},(0,e.createElement)(r.Spinner,null)," ",(0,t.__)("Creating"),"…"),(L||!i)&&!T&&(0,e.createElement)(R,{value:x,onChange:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";C(e)},onSelect:async e=>{A===e.type?await G(x):(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};P(!1),a({...t,...e}),(0,v.doAction)("aioseo-link-format-link-added",{...i,...e,title:null})}(e,i),B())},renderSuggestions:c?n=>{let{suggestionsListProps:o,buildSuggestionItemProps:l,suggestions:c,selectedSuggestion:u,isLoading:d,isInitialSuggestions:p}=n;const k=g()("block-editor-link-control__search-results",{"is-loading":d}),f=["url","mailto","tel","internal"],w=1===c.length&&f.includes(c[0].type.toLowerCase()),_=h&&!w&&!p,b=`block-editor-link-control-search-results-label-${S}`,y=p?(0,t.__)("Recently updated"):(0,t.sprintf)((0,t.__)('Search results for "%1$s"'),x),E=(0,e.createElement)(p?e.Fragment:r.VisuallyHidden,{},(0,e.createElement)("span",{className:"block-editor-link-control__search-results-label",id:b},y));return(0,e.createElement)("div",{className:"block-editor-link-control__search-results-wrapper"},E,(0,e.createElement)("div",m({},o,{className:k,"aria-labelledby":b}),c.map(((t,n)=>_&&A===t.type?(0,e.createElement)(H,{searchTerm:x,onClick:async()=>{await G(t.title)},key:t.type,itemProps:l(t,n),isSelected:n===u}):A===t.type?null:(0,e.createElement)(N,{key:`${t.id}-${t.type}`,itemProps:l(t,n),suggestion:t,index:n,onClick:()=>{let e=t.title;isNaN(parseInt(t.id))&&(e=s),B(),a({...i,...t,title:e}),(0,v.doAction)("aioseo-link-format-link-added",{...i,...t,title:e})},isSelected:n===u,isURL:f.includes(t.type.toLowerCase()),searchTerm:x})))))}:null,fetchSuggestions:$,showInitialSuggestions:u,errorMessage:I}),i&&!L&&!T&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{"aria-label":(0,t.__)("Currently selected"),"aria-selected":"true",className:g()("block-editor-link-control__search-item",{"is-current":!0})},(0,e.createElement)("span",{className:"block-editor-link-control__search-item-header"},(0,e.createElement)(r.ExternalLink,{className:"block-editor-link-control__search-item-title",href:i.url},i&&i.title||U),i&&i.title&&(0,e.createElement)("span",{className:"block-editor-link-control__search-item-info"},U)),(0,e.createElement)(r.Button,{isSecondary:!0,onClick:()=>P(!0),className:"block-editor-link-control__search-item-action"},(0,t.__)("Edit")),(0,e.createElement)(V,{fillProps:q}))),(0,e.createElement)(y,{key:"aioseop-settings-drawer",value:i,settings:l,onChange:a,selectedText:s}),(0,e.createElement)("div",{id:"aioseo-link-assistant-education"},(0,e.createElement)("div",{id:"aioseo-link-assistant-education-mount"}),(0,e.createElement)("input",{type:"hidden",value:JSON.stringify(i)})))}F.ViewerFill=I;const z=F,j=(0,r.withSpokenMessages)((function(n){let{isActive:l,activeAttributes:s,addingLink:a,value:c,onChange:u,speak:m,stopAddingLink:h}=n;const g=(0,e.useMemo)(d.uniqueId,[a]),[k,f]=(0,e.useState)(),w=c.text.substring(c.start,c.end),v=(0,e.useMemo)((()=>{const e=window.getSelection();if(!e.rangeCount)return;const t=e.getRangeAt(0);if(a&&!l)return t;let n=t.startContainer;for(n=n.nextElementSibling||n;n.nodeType!==window.Node.ELEMENT_NODE;)n=n.parentNode;return n.closest("a")}),[a,c.start,c.end]),_={url:s.url,opensInNewTab:"_blank"===s.target,nofollow:!!s.rel&&s.rel.includes("nofollow"),sponsored:!!s.rel&&s.rel.includes("sponsored"),ugc:!!s.rel&&s.rel.includes("ugc"),title:s.title||"",isAddingLink:!s.url,...k};return(0,e.createElement)(r.Popover,{key:g,anchor:p(window.aioseo.wpVersion,"6.1",">=")?v:void 0,anchorRef:p(window.aioseo.wpVersion,"6.1","<")?v:void 0,focusOnMount:!!a&&"firstElement",onClose:h,position:"bottom center"},(0,e.createElement)(z,{value:_,onChange:function(e){e={...k,...e};const n=(_.opensInNewTab!==e.opensInNewTab||_.sponsored!==e.sponsored||_.nofollow!==e.nofollow||_.ugc!==e.ugc)&&_.url===e.url,r=n&&void 0===e.url;if(f(r?e:void 0),r)return;const s=(0,o.prependHTTP)(e.url),a=function(e){let{url:t,opensInNewWindow:n,nofollow:r,sponsored:i,ugc:o,title:l}=e;const s={type:"core/link",attributes:{url:t}},a=[];return n&&(s.attributes.target="_blank",a.push("noopener")),r&&a.push("nofollow"),i&&a.push("sponsored"),o&&a.push("ugc"),0<a.length&&(s.attributes.rel=a.join(" ")),void 0!==l&&(s.attributes.title=l),s}({url:s,opensInNewWindow:e.opensInNewTab,nofollow:e.nofollow,sponsored:e.sponsored,ugc:e.ugc,title:e.title});if((0,i.isCollapsed)(c)&&!l){const t=e.title||s,n=(0,i.applyFormat)((0,i.create)({text:t}),a,0,t.length);u((0,i.insert)(c,n))}else u((0,i.applyFormat)(c,a));n||h(),function(e){if(!e)return!1;const t=e.trim();if(!t)return!1;if(/^\S+:/.test(t)){const e=(0,o.getProtocol)(t);if(!(0,o.isValidProtocol)(e))return!1;if((0,d.startsWith)(e,"http")&&!/^https?:\/\/[^/\s]/i.test(t))return!1;const n=(0,o.getAuthority)(t);if(!(0,o.isValidAuthority)(n))return!1;const r=(0,o.getPath)(t);if(r&&!(0,o.isValidPath)(r))return!1;const i=(0,o.getQueryString)(t);if(i&&!(0,o.isValidQueryString)(i))return!1;const l=(0,o.getFragment)(t);if(l&&!(0,o.isValidFragment)(l))return!1}return!((0,d.startsWith)(t,"#")&&!(0,o.isValidFragment)(t))}(s)?m(l?(0,t.__)("Link edited.","all-in-one-seo-pack"):(0,t.__)("Link inserted.","all-in-one-seo-pack"),"assertive"):m((0,t.__)("Warning: the link has been inserted but may have errors. Please test it.","all-in-one-seo-pack"),"assertive")},forceIsEditingLink:a,selectedText:w}))})),M="core/link",U=(0,t.__)("Link","all-in-one-seo-pack"),D={name:M,title:U,tagName:"a",className:null,attributes:{url:"href",target:"target",rel:"rel",title:"title"},__unstablePasteRule(e,t){let{html:n,plainText:r}=t;if((0,i.isCollapsed)(e))return e;const l=(n||r).replace(/<[^>]+>/g,"").trim();return(0,o.isURL)(l)?(window.console.log("Created link:\n\n",l),(0,i.applyFormat)(e,{type:M,attributes:{url:(0,s.decodeEntities)(l)}})):e},edit:(0,r.withSpokenMessages)(class extends e.Component{constructor(){super(...arguments),this.addLink=this.addLink.bind(this),this.stopAddingLink=this.stopAddingLink.bind(this),this.onRemoveFormat=this.onRemoveFormat.bind(this),this.state={addingLink:!1}}addLink(){const{value:e,onChange:t}=this.props,n=(0,i.getTextContent)((0,i.slice)(e));n&&(0,o.isURL)(n)?t((0,i.applyFormat)(e,{type:M,attributes:{url:n}})):n&&(0,o.isEmail)(n)?t((0,i.applyFormat)(e,{type:M,attributes:{url:`mailto:${n}`}})):this.setState({addingLink:!0})}stopAddingLink(){this.setState({addingLink:!1}),this.props.onFocus()}onRemoveFormat(){const{value:e,onChange:n,speak:r}=this.props;n((0,i.removeFormat)(e,M)),r((0,t.__)("Link removed.","all-in-one-seo-pack"),"assertive")}render(){const{isActive:n,activeAttributes:r,value:i,onChange:o}=this.props;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.RichTextShortcut,{type:"primary",character:"k",onUse:this.addLink}),(0,e.createElement)(l.RichTextShortcut,{type:"primaryShift",character:"k",onUse:this.onRemoveFormat}),n&&(0,e.createElement)(l.RichTextToolbarButton,{name:"link",icon:c,title:(0,t.__)("Unlink","all-in-one-seo-pack"),onClick:this.onRemoveFormat,isActive:n,shortcutType:"primaryShift",shortcutCharacter:"k"}),!n&&(0,e.createElement)(l.RichTextToolbarButton,{name:"link",icon:u,title:U,onClick:this.addLink,isActive:n,shortcutType:"primary",shortcutCharacter:"k"}),(this.state.addingLink||n)&&(0,e.createElement)(j,{key:"aioseop-inline-link-ui",addingLink:this.state.addingLink,stopAddingLink:this.stopAddingLink,isActive:n,activeAttributes:r,value:i,onChange:o}))}})},{registerFormatType:B,unregisterFormatType:W}=wp.richText;[D].forEach((e=>{let{name:t,...n}=e;t&&(W("core/link"),B(t,n))}))})()})();